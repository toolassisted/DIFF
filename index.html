<!DOCTYPE html>
<html>
<head>
	<title>SFV DIFF LOL</title>
	<meta name="viewport" content="width=device-width, initial-scale=0.50, minimum-scale=0.10, maximum-scale=10.0, user-scalable=1">
	<link rel="stylesheet" type="text/css" href="html.css">
	<script src="d3.v4.min.js"></script>
	<script src="jsondiffpatch-full.min.js"></script>
	<script src="jsondiffpatch-formatters.min.js"></script>
	<style type="text/css">
		html, body {
			width: 100%;
			height: 100%;
			margin: 0;
			padding: 0;
		}
		html {
			/*position: fixed;*/
		}
		body {
			font-family: sans-serif;
			display: flex;
		}
		#JSONDIV {
			/*height: 95vh;*/
			-webkit-overflow-scrolling: touch;
			overflow-y: scroll;
			padding-right: 1em;
			/*margin-right: 1em;*/
			flex: 0 0 auto;
			padding-bottom: 50vh;
		}
		#JSONDIV ul {
  			font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'DejaVu Sans Mono', Monaco, Courier, monospace;
		}
		#JSONDIV li, #SCRIPT li {
			cursor: pointer;
		}
		.DIFF1 {
			background-color: #fdd;
		}
		.DIFF2 {
			background-color: #dfd;
		}
		.DIFF3 {
			background-color: #ffd;
		}
		#JSONDIV li.DIFF1 + li {
			background-color: #dfd;
		}
		#BACUL li:hover, #BCMUL li:hover {
			background-color: #fcc !important;
		}
		#SCRIPT ol li:hover, #CHARUL li:hover, #BACUL li:hover + li, #BCMUL li:hover + li {
			background-color: #cfc !important;
		}
		#DIFF {
			-webkit-overflow-scrolling: touch;
			overflow-y: scroll;
			overflow-x: auto;
			/*flex: 1 1 100%;*/
			/*flex: 1 4 50%;*/
			flex: 1 1 auto;
			width: 100%;
			padding-right: 1em;
			padding-left: 1em;
			padding-bottom: 50vh;
			display: block;
		}
		#SCRIPT {
			-webkit-overflow-scrolling: touch;
			overflow-y: scroll;
			overflow-x: auto;
			/*flex: 1 1 50%; */
			flex: 1 1 30em;
			padding-right: 1em;
			padding-left: 1em;
			padding-bottom: 50vh;
		}
		#SCRIPT.fold {
			display: none;
		}
		.pre-wrap {
			white-space: pre-wrap;
		}
		.BOXDIV {
			text-align: right;
			padding-right: 0.3em;
			margin-left: 0.3em;
			line-height: 1em;
			flex: 0 0 auto;
			min-width: 2em;
			color: #999;
		}
		#FRAMETABLEOL div {
			/*width: 70em;*/
			/*overflow: auto;*/
			font-family: monospace;
		}
		#FRAMETABLE {
			font-family: monospace;
			/*overflow: auto;*/
		}
		#FRAMETABLE tr:first-child th {
			/*position: fixed;*/
			/*background-color: #fff;*/
		}
		#FRAMETABLE td {
			min-width: 2em;
			text-align: center;
			vertical-align: top;
		}
		#FRAMETABLE th {
			white-space: nowrap;
			min-width: 7em;
			font-weight: normal;
		}
		.CANCELDIV {
			font-family: monospace;
			padding-left: 8em;
			color: #999;
		}
		.AUTOCANCELDIV {
			font-family: monospace;
			padding-left: 8em;
			color: #999;
			cursor: pointer;
		}
		#FILEDIV {
			margin-top: 1em;
		}
		.LAYOUTBUTTON {
			margin-left: 2em;
			width: 5em;
		}
		.UNOC {
			display: none;
		}
		#STAGESVG {
			width: 100%;
			height: 400px;
			/*vertical-align: top;*/
		}
		#STAGESVG line {
			stroke-width: 1px;
			stroke: #999;
			fill: #ddd;
			vector-effect: non-scaling-stroke;
		}
		rect.PUSH {
			/*stroke-width: 1px;*/
			/*stroke: #990;*/
			fill: #330;
			vector-effect: non-scaling-stroke;
			mix-blend-mode: screen;
		}
		rect.PROX {
			stroke-width: 1px;
			stroke: #333;
			fill: none;
			vector-effect: non-scaling-stroke;
			mix-blend-mode: screen;
		}
		rect.HITBOX {
			stroke-width: 1px;
			stroke: #909;
			fill: none;
			vector-effect: non-scaling-stroke;
			mix-blend-mode: screen;
		}
		rect.HIT {
			stroke-width: 1px;
			stroke: #900;
			fill: #100;
			/*fill: none;*/
			vector-effect: non-scaling-stroke;
			mix-blend-mode: screen;
		}
		rect.PROJ {
			stroke-width: 1px;
			stroke: #632;
			fill: #210;
			/*fill: none;*/
			vector-effect: non-scaling-stroke;
			mix-blend-mode: screen;
		}
		rect.THROW {
			stroke-width: 1px;
			stroke: #33f;
			fill: #001;
			/*fill: none;*/
			vector-effect: non-scaling-stroke;
			mix-blend-mode: screen;
		}
		rect.HURT-HIT {
			stroke-width: 1px;
			stroke: #090;
			fill: none;
			vector-effect: non-scaling-stroke;
			mix-blend-mode: screen;
		}
		rect.HURT-STRIKE {
			stroke-width: 1px;
			stroke: #963;
			fill: none;
			vector-effect: non-scaling-stroke;
			mix-blend-mode: screen;
		}
		rect.HURT-PROJ {
			stroke-width: 1px;
			stroke: #909;
			fill: none;
			vector-effect: non-scaling-stroke;
			mix-blend-mode: screen;
		}
		rect.HURT-THROW {
			stroke-width: 1px;
			stroke: #099;
			fill: none;
			vector-effect: non-scaling-stroke;
			mix-blend-mode: screen;
		}
		rect.HURT-ARMOR {
			stroke-width: 5px;
			stroke: #606;
			fill: none;
			vector-effect: non-scaling-stroke;
			mix-blend-mode: screen;
		}
		rect.HURT-INV-AIR {
			stroke-width: 3px;
			stroke: #066;
			fill: none;
			vector-effect: non-scaling-stroke;
			mix-blend-mode: screen;
		}
		.UCSAME {
			color: #ccc;
		}
		table.FRAMEDATATABLELIST {
			font-size: 0.8em;
		}
		table.FRAMEDATATABLELIST td {
			max-width: 10em;
			overflow-x: auto;
			background-color: #eee;
			padding: 0.5em;
			white-space: nowrap;
			text-align: center;
		}
		table.FRAMEDATATABLELIST tr.FRAMEDATAMOVE td {
			background-color: #ddd;
		}
		table.FRAMEDATATABLE td {
			padding: 0.5em;
		}
		table.FRAMEDATATABLE tr.FRAMEDATAMOVE td {
			background-color: #ddd;
			color: #999;
		}
		table.FRAMEDATATABLE tr.FRAMEDATAINPUT td {
			background-color: #eee;
		}
		table.FRAMEDATATABLE tr.FRAMEDATAHIT td {
			background-color: #ded;
		}
		table.FRAMEDATATABLE tr.FRAMEDATACH td {
			background-color: #eed;
		}
		table.FRAMEDATATABLE tr.FRAMEDATABLK td {
			background-color: #edd;
		}
		table.FRAMEDATATABLE tr:hover td {
			background-color: #fff;
		}
		table.FRAMEDATATABLE td {
			/*border: solid 1px #ccc;*/
			background-color: #eee;
			text-align: center;
			padding: 0.5em;
			/*font-family: monospace;*/
		}
		table.MOVEINPUTTABLE tr.CANCELLIST0 td {
			background-color: #ddd;
		}
		table.MOVEINPUTTABLE tr:hover td {
			background-color: #fff;
		}
		table.MOVEINPUTTABLE td {
			/*border: solid 1px #ccc;*/
			background-color: #eee;
			/*text-align: center;*/
			padding: 0.5em;
			font-family: monospace;
		}
		span.D5 {
			color: #999;
		}
		tr.HITBOX-PROX td {
			background-color: #ddd;
		}
		tr.HITBOX-HIT td {
			background-color: #fee;
		}
		tr.HITBOX-PROJ td {
			background-color: #fed;
		}
		tr.HITBOX-THROW td {
			background-color: #eef;
		}
		tr.HITBOX-LOL td {
			background-color: #fdf;
		}

		tr.HURTBOX-HITPROJ td {
			background-color: #efe;
		}
		tr.HURTBOX-HIT td {
			background-color: #fed;
		}
		tr.HURTBOX-PROJ td {
			background-color: #ffe;
		}
		tr.HURTBOX-THROW td {
			background-color: #eef;
		}
	</style>
</head>
<body>
<nav id="JSONDIV"><ul><li><a href="https://twitter.com/arlieth/status/810015951890554880">U C HELP</a></li></ul></nav>
<aside id="SCRIPT" class="fold"><pre></pre></aside>
<main id="DIFF">DIFF
<div><a href="https://twitter.com/arlieth/status/810015951890554880"><img src="TWITTER.PNG" /></a></div>
</main>
<script type="text/javascript">
if (!Element.prototype.scrollIntoViewIfNeeded) Element.prototype.scrollIntoViewIfNeeded = Element.prototype.scrollIntoView;
var STAGESCALE = 1;
var HASH = { NAME: null, INDEX: null, CLICK: false };
var CHARFRAMEDATA = [
	"KRN_004"
	];
var CHARFILE = [
//"ALX_007", "BLR_009", "BRD_006", "BSN_004", "CMN_004", "CMY_006", "CNL_008", "DSM_008", "FAN_006", "GUL_005", "IBK_005", "JRI_005", "KEN_007", "KRN_006", "LAR_006", "NCL_006", "NSH_006", "RMK_005", "RSD_006", "RYU_007", "URN_004", "VEG_009", "Z20_001", "Z21_002", "Z22_002", "Z24_000", "ZGF_006",
"ALX_000", "ALX_001", "ALX_002", "ALX_003", "ALX_004", "ALX_005", "ALX_006", "ALX_007", "ALX_020_301", "ALX_020_302", "BLR_000", "BLR_001", "BLR_002", "BLR_003", "BLR_004", "BLR_005", "BLR_006", "BLR_007", "BLR_008", "BLR_009", "BLR_020_301", "BRD_000", "BRD_001", "BRD_002", "BRD_003", "BRD_004", "BRD_005", "BRD_006", "BRD_020_301", "BRD_020_302", "BSN_000", "BSN_001", "BSN_002", "BSN_003", "BSN_004", "BSN_020_301", "BSN_020_302", "CMN_000", "CMN_001", "CMN_002", "CMN_003", "CMN_004", "CMY_000", "CMY_001", "CMY_002", "CMY_003", "CMY_004", "CMY_005", "CMY_006", "CMY_020_301", "CNL_000", "CNL_001", "CNL_002", "CNL_003", "CNL_004", "CNL_005", "CNL_006", "CNL_007", "CNL_008", "CNL_009_290", "CNL_020_301", "CNL_020_302", "DSM_000", "DSM_001", "DSM_002", "DSM_003", "DSM_004", "DSM_005", "DSM_006", "DSM_007", "DSM_008", "DSM_020_301", "FAN_000", "FAN_001", "FAN_002", "FAN_003", "FAN_004", "FAN_005", "FAN_006", "FAN_020_301", "FAN_020_302", "GUL_000", "GUL_001", "GUL_002", "GUL_003", "GUL_004", "GUL_005", "GUL_020_301", "GUL_020_302", "IBK_000", "IBK_001", "IBK_002", "IBK_003", "IBK_004", "IBK_005", "IBK_006_270", "IBK_006_290", "IBK_006_310", "IBK_020_301", "IBK_020_310", "IBK_021_310", "JRI_000", "JRI_001", "JRI_002", "JRI_003", "JRI_004", "JRI_005_240", "JRI_005_250", "JRI_005", "JRI_020_301", "JRI_020_310", "KEN_000", "KEN_001", "KEN_002", "KEN_003", "KEN_004", "KEN_005", "KEN_006", "KEN_007_240", "KEN_007_250", "KEN_007", "KEN_020_301", "KEN_020_302", "KEN_021_310", "KRN_000", "KRN_001", "KRN_002", "KRN_003", "KRN_004", "KRN_005", "KRN_006_240", "KRN_006_250", "KRN_006_270", "KRN_006_290", "KRN_006", "KRN_020_301", "KRN_020_302", "LAR_000", "LAR_001", "LAR_002", "LAR_003", "LAR_004", "LAR_005", "LAR_006", "LAR_020_301", "LAR_020_302", "LAR_021_310", "NCL_000", "NCL_001", "NCL_002", "NCL_003", "NCL_004", "NCL_005", "NCL_006", "NCL_020_301", "NSH_000", "NSH_001", "NSH_002", "NSH_003", "NSH_004", "NSH_005", "NSH_006", "NSH_020_301", "NSH_020_302", "RMK_000", "RMK_001", "RMK_002", "RMK_003", "RMK_004", "RMK_005_240", "RMK_005", "RMK_006_250", "RMK_006_310", "RMK_020_301", "RMK_020_302", "RMK_021_310", "RSD_000", "RSD_001", "RSD_002", "RSD_003", "RSD_004", "RSD_005", "RSD_006", "RSD_020_301", "RYU_000", "RYU_001", "RYU_002", "RYU_003", "RYU_004", "RYU_005", "RYU_006", "RYU_007", "RYU_020_301", "RYU_020_302", "RYU_021_310", "URN_000", "URN_001", "URN_002", "URN_003", "URN_004_260", "URN_004_270", "URN_004_290", "URN_004", "URN_020_301", "URN_020_302", "URN_021_310", "VEG_000", "VEG_001", "VEG_002", "VEG_003", "VEG_004", "VEG_005", "VEG_006", "VEG_007", "VEG_008", "VEG_009", "VEG_020_301", "VEG_020_302", "Z20_000", "Z20_001", "Z20_002_270", "Z20_002_290", "Z20_020_301", "Z20_020_302", "Z20_020_310", "Z21_000", "Z21_001", "Z21_002_240", "Z21_002_250", "Z21_002_270", "Z21_002_290", "Z21_002_310", "Z21_002", "Z21_020_301", "Z21_020_302", "Z21_021_310", "Z22_000", "Z22_001", "Z22_002_240", "Z22_002", "Z22_003_250", "Z22_020_301", "Z22_020_302", "Z23_000_250", "Z23_001_270", "Z23_001_290", "Z23_020_301", "Z23_020_310", "Z23_021_310", "Z24_000_240", "Z24_000", "Z24_001_250", "Z24_001_270", "Z24_001_290", "Z24_020_301", "Z24_020_302", "Z24_021_310", "Z25_000_270", "Z25_000_290", "Z25_001_290", "Z25_020_301", "Z25_020_302", "Z26_000_301", "Z26_000_302", "Z26_000_310", "Z27_000_310", "ZGF_000", "ZGF_001", "ZGF_002", "ZGF_003", "ZGF_004", "ZGF_005", "ZGF_006", "ZGF_020_301", "ZGF_020_310",
	];
var CHARBAC = [];
var CHARBCM = [];
CHARFILE.forEach(function(f){ CHARBAC.push(f+"_BAC"); CHARBCM.push(f+"_BCM");});
function DEC2BIN(DEC) {
	return d3.format("04b")((DEC>>0x4*3)&0xf) + " " + d3.format("04b")((DEC>>0x4*2)&0xf) + " " + d3.format("04b")((DEC>>0x4*1)&0xf) + " " + d3.format("04b")((DEC>>0x4*0)&0xf);
}
var PAD3 = d3.format("03");
d3.select("#JSONDIV").append("span").text("CHAR");
d3.select("#JSONDIV").append("ul").attr("id","CHARUL").selectAll("li").data(CHARFILE).enter().append("li").text(function(d){return d;}).on("click",function(charfile,cfi){
	var HASHCLICK = HASH.CLICK; HASH.CLICK = false;
	var HASHNAME = HASH.NAME; HASH.NAME = null;
	var HASHINDEX = HASH.INDEX; HASH.INDEX = null;
	if (cfi>=CHARBAC.length) return;
	if (!HASHCLICK) { MECHASH(false); HASHNAME = HASH.NAME; HASH.NAME = null; HASHINDEX = HASH.INDEX; HASH.INDEX = null; HASHCLICK = false; HASH.CLICK = false; UCHASH(charfile); }
	d3.selectAll(".DIFF2").classed("DIFF2",false);
	d3.select(this).classed("DIFF2",true);
	d3.select("#SCRIPT").classed("fold", false);
	// document.getElementById('DIFF').innerHTML = "<span class=\"DIFF2\">" + CHARBAC[cfi] + "</span> <span class=\"DIFF2\">" + CHARBCM[cfi] + "</span>";
	d3.json("JSON/"+CHARFILE[cfi]+"_BAC.json", function(error1, data1) {
		d3.json("JSON/"+CHARFILE[cfi]+"_BCM.json", function(error2, data2) {
		d3.json("JSON/"+CHARFILE[cfi]+"_BAC_eff.json", function(error3, data3) {
		// d3.json("FRAMEDATA/"+CHARFILE[cfi]+".json", function(error4, data4) { // NOFD
			data1["JSON"] = CHARBAC[cfi];
			data2["JSON"] = CHARBCM[cfi];
			if (data3 == null) data3 = {};
			if (data3.HitboxEffectses == null) data3.HitboxEffectses = [];
			if (data3.MoveLists == null) data3.MoveLists = [{Moves:[]}];
			// var bac1 = UCBAC(data1), bcm1 = UCBCM(data2);
			// document.getElementById('DIFF').innerHTML += "<br><br>";			
			// console.log(data2);
			// console.log(data1);
			var SCRIPTBOX = d3.select("#SCRIPT");
			SCRIPTBOX.selectAll("*").remove();
			SCRIPTBOX.append("div").text(CHARFILE[cfi]).classed("DIFF2", true);
			var charfileul = SCRIPTBOX.append("ul").attr("id","CHARFILE");
			var cfol = charfileul.append("li").text(CHARFILE[cfi]).append("ol");
			var bcmol = charfileul.append("li").text(CHARBCM[cfi]).append("ol");
			var baceffol = charfileul.append("li").text(CHARBAC[cfi] + "_eff").append("ol");
			var bacol = charfileul.append("li").text(CHARBAC[cfi]).append("ol");
			bcmol.append("li").text("MOVES").attr("value",data2.Moves.length).on("click",function(d){ if (data2.Moves.length > 0) d3.select("#MOVE0").node().scrollIntoViewIfNeeded(); });
			bcmol.append("li").text("CHARGES").attr("value",data2.Charges.length).on("click",function(d){ if (data2.Charges.length > 0) d3.select("#CHARGE0").node().scrollIntoViewIfNeeded(); });
			bcmol.append("li").text("INPUTS").attr("value",data2.Inputs.length).on("click",function(d){ if (data2.Inputs.length > 0) d3.select("#INPUT0").node().scrollIntoViewIfNeeded(); });
			bcmol.append("li").text("CANCEL LISTS").attr("value",data2.CancelLists.length).on("click",function(d){ if (data2.CancelLists.length > 0) d3.select("#CANCEL0").node().scrollIntoViewIfNeeded(); });
			bacol.append("li").text("HITBOX EFFECTS").attr("value",data1.HitboxEffectses.length).on("click",function(d){ if (data1.HitboxEffectses.length > 0) d3.select("#EFFECT0").node().scrollIntoViewIfNeeded(); });
			bacol.append("li").text("SCRIPTS").attr("value",data1.MoveLists[0].Moves.length).on("click",function(d){ if (data1.MoveLists[0].Moves.length > 0) d3.select("#SCRIPT0").node().scrollIntoViewIfNeeded(); });
			if (data1.MoveLists.length == 2) bacol.append("li").text("SCRIPTS VT").attr("value",data1.MoveLists[1].Moves.length).on("click",function(d){ if (data1.MoveLists[1].Moves.length > 0) d3.select("#SCRIPTVT0").node().scrollIntoViewIfNeeded(); });
			baceffol.append("li").text("EFF HITBOX EFFECTS").attr("value",data3.HitboxEffectses.length).on("click",function(d){ if (data3.HitboxEffectses.length > 0) d3.select("#EFFECTEFF0").node().scrollIntoViewIfNeeded(); });
			baceffol.append("li").text("EFF SCRIPTS").attr("value",data3.MoveLists[0].Moves.length).on("click",function(d){ if (data3.MoveLists[0].Moves.length > 0) d3.select("#SCRIPTEFF0").node().scrollIntoViewIfNeeded(); });
			
			var DIFFBOX = d3.select("#DIFF");
			DIFFBOX.text("").selectAll("*").remove();
			var DIFFHEAD = DIFFBOX.append("div").text(CHARFILE[cfi]).classed("DIFF2", true);
			DIFFHEAD.append("button").classed("LAYOUTBUTTON", true).text("| | |").on("click",function(){ d3.select("#JSONDIV").classed("UNOC",false); d3.select("#SCRIPT").classed("UNOC",false); });
			DIFFHEAD.append("button").classed("LAYOUTBUTTON", true).text("| |").on("click",function(){ d3.select("#JSONDIV").classed("UNOC",true); d3.select("#SCRIPT").classed("UNOC",false); });
			DIFFHEAD.append("button").classed("LAYOUTBUTTON", true).text("|").on("click",function(){ d3.select("#JSONDIV").classed("UNOC",true); d3.select("#SCRIPT").classed("UNOC",true); });
			// var difful = DIFFBOX.append("ul").attr("id","CHARFILE");
			// difful.append("li").text(CHARBCM[cfi]);
			// difful.append("li").text(CHARBAC[cfi]);

			var FILEDIV = DIFFBOX.append("div").attr("id","FILEDIV");

			function UCSCRIPTTABLE(movescript, FILEDIV, movescriptlist) {				
				var scriptdiv = FILEDIV.append("div").text("SCRIPT");
				var zoomdiv = scriptdiv.append("div").style("float","right");
				zoomdiv.append("span").text("SCALE ");
				zoomdiv.append("button").text("1.0").on("click",function(){stagesvg.style("transform","scale(1.0)");STAGESCALE=1.0;});
				zoomdiv.append("button").text("1.5").on("click",function(){stagesvg.style("transform","scale(1.5)");STAGESCALE=1.5;});
				zoomdiv.append("button").text("2.0").on("click",function(){stagesvg.style("transform","scale(2.0)");STAGESCALE=2.0;});
				zoomdiv.append("button").text("STAT").on("click",function(){stagestat.classed("UNOC",!stagestat.classed("UNOC"));});
				var fileol = FILEDIV.append("ol");
				var stagelist = fileol.append("li").attr("value",movescript.TotalTicks).classed("pre-wrap", true);
				var stagediv = stagelist.append("div");//.style("overflow","auto");
				var stageroot = stagediv.append("svg").attr("id","STAGESVG").style("background-color","#000");
				var stagestat = stageroot.append("text").attr("text-anchor","end");
				var stagesvg = stageroot.append("g").style("transform-origin","100px 350px").style("transform","scale("+STAGESCALE+")");
				stageroot.append("line").attr("x1",100).attr("x2",100).attr("y1",350-0).attr("y2",350+50);
				stageroot.append("line").attr("x1",0).attr("x2","98%").attr("y1",350).attr("y2",350);
				for(var ff=1;ff<movescript.TotalTicks;ff++) UCHITBOX(ff,false);
				var stagetext = stagesvg.append("g");
				stagetext.append("text").attr("x",110).attr("y",400).attr("fill","#999").text("U SCROLL >");
				function UCHITBOX(stageframe,remove) {
					var statpush = null;
					var stathurt = null;
					var stathurtthrow = null;
					var stathit = null;
					var statthrow = null;
					if (remove!==false) stagesvg.selectAll("g").remove();
					var stageg = stagesvg.append("g").attr("transform","translate(100,350)");				
					if (remove!==false || stageframe==1) stageg.append("line").attr("x1",0).attr("x2",0).attr("y1",-7).attr("y2",+7);
					if (remove!==false || stageframe==1) stageg.append("line").attr("x1",-7).attr("x2",+7).attr("y1",0).attr("y2",0);
					if (movescript.Hitboxes != null)
					movescript.Hitboxes.forEach(function(hitbox, index){
						if (hitbox.TickStart < stageframe && hitbox.TickEnd >= stageframe) {
							if (remove!==false || stageframe==1) if (hitbox.HitType == 4) stageg.append("rect").attr("x",hitbox.X*100).attr("y",-hitbox.Y*100-hitbox.Height*100).attr("width",hitbox.Width*100).attr("height",hitbox.Height*100).classed("PROX", true);
							if (remove!==false || stageframe==1) if (hitbox.HitType == 3) stageg.append("rect").attr("x",hitbox.X*100).attr("y",-hitbox.Y*100-hitbox.Height*100).attr("width",hitbox.Width*100).attr("height",hitbox.Height*100).classed("PROX", true);
							if (hitbox.HitType == 0) stageg.append("rect").attr("x",hitbox.X*100).attr("y",-hitbox.Y*100-hitbox.Height*100).attr("width",hitbox.Width*100).attr("height",hitbox.Height*100).classed("HIT", true);
							if (hitbox.HitType == 1) stageg.append("rect").attr("x",hitbox.X*100).attr("y",-hitbox.Y*100-hitbox.Height*100).attr("width",hitbox.Width*100).attr("height",hitbox.Height*100).classed("PROJ", true);
							if (hitbox.HitType == 2) stageg.append("rect").attr("x",hitbox.X*100).attr("y",-hitbox.Y*100-hitbox.Height*100).attr("width",hitbox.Width*100).attr("height",hitbox.Height*100).classed("THROW", true);
							if (hitbox.HitType == 0) stathit = Math.max(stathit, hitbox.X+hitbox.Width);
							if (hitbox.HitType == 1) stathit = Math.max(stathit, hitbox.X+hitbox.Width);
							if (hitbox.HitType == 2) statthrow = Math.max(statthrow, hitbox.X+hitbox.Width);
							if (hitbox.HitType == 5) stageg.append("rect").attr("x",hitbox.X*100).attr("y",-hitbox.Y*100-hitbox.Height*100).attr("width",hitbox.Width*100).attr("height",hitbox.Height*100).classed("HITBOX", true);
							if (hitbox.HitType == 6) stageg.append("rect").attr("x",hitbox.X*100).attr("y",-hitbox.Y*100-hitbox.Height*100).attr("width",hitbox.Width*100).attr("height",hitbox.Height*100).classed("HITBOX", true);

						}
					});
					if (movescript.Hurtboxes != null)
					movescript.Hurtboxes.forEach(function(hitbox, index){
						if (hitbox.TickStart < stageframe && hitbox.TickEnd >= stageframe) {
							if (remove!==false || stageframe==1) if ((hitbox.Flag1 & 3) == 3) stageg.append("rect").attr("x",hitbox.X*100).attr("y",-hitbox.Y*100-hitbox.Height*100).attr("width",hitbox.Width*100).attr("height",hitbox.Height*100).classed("HURT-HIT", true);
							if (remove!==false || stageframe==1) if ((hitbox.Flag1 & 3) == 1) stageg.append("rect").attr("x",hitbox.X*100).attr("y",-hitbox.Y*100-hitbox.Height*100).attr("width",hitbox.Width*100).attr("height",hitbox.Height*100).classed("HURT-STRIKE", true);
							if (remove!==false || stageframe==1) if ((hitbox.Flag1 & 3) == 2) stageg.append("rect").attr("x",hitbox.X*100).attr("y",-hitbox.Y*100-hitbox.Height*100).attr("width",hitbox.Width*100).attr("height",hitbox.Height*100).classed("HURT-PROJ", true);
							if (remove!==false || stageframe==1) if ((hitbox.Flag1 & 4) == 4) stageg.append("rect").attr("x",hitbox.X*100).attr("y",-hitbox.Y*100-hitbox.Height*100).attr("width",hitbox.Width*100).attr("height",hitbox.Height*100).classed("HURT-THROW", true);
							if (remove!==false || stageframe==1) if (hitbox.HitEffect > 0) stageg.append("rect").attr("x",hitbox.X*100).attr("y",-hitbox.Y*100-hitbox.Height*100).attr("width",hitbox.Width*100).attr("height",hitbox.Height*100).classed("HURT-ARMOR", true);
							if (remove!==false || stageframe==1) if ((hitbox.Unknown6 & 4) == 4) stageg.append("rect").attr("x",hitbox.X*100).attr("y",-hitbox.Y*100-hitbox.Height*100).attr("width",hitbox.Width*100).attr("height",hitbox.Height*100).attr("stroke-dasharray",10).classed("HURT-INV-AIR", true);
							if ((hitbox.Flag1 & 4) == 4) stathurtthrow = Math.max(stathurtthrow, hitbox.X+hitbox.Width);
							if ((hitbox.Flag1 & 3) != 0) stathurt = Math.max(stathurt, hitbox.X+hitbox.Width);
						}
					});
					if (movescript.PhysicsBoxes != null)
					movescript.PhysicsBoxes.forEach(function(hitbox, index){
						if (hitbox.TickStart < stageframe && hitbox.TickEnd >= stageframe) {
							if (remove!==false || stageframe==1) stageg.append("rect").attr("x",hitbox.X*100).attr("y",-hitbox.Y*100-hitbox.Height*100).attr("width",hitbox.Width*100).attr("height",hitbox.Height*100).classed("PUSH",true);
							statpush = Math.max(statpush, hitbox.X+hitbox.Width);
						}
					});
					var movex = 0;
					var movey = 0;
					if (movescript.Positions != null) {
						movescript.Positions.forEach(function(hitbox, index){
							if (hitbox.TickStart < stageframe && hitbox.TickEnd >= stageframe) {
								if ((hitbox.Flag & 32768) == 32768) movex += hitbox.Movement;
								if ((hitbox.Flag & 65535) == 65536) movey += hitbox.Movement;
							}
						});
					}
					if (movescript.Forces != null) {
						var speedx = 0;
						var speedy = 0;
						var accelx = 0;
						var accely = 0;
						for (var ff=1;ff<=stageframe;ff++) {
							movescript.Forces.forEach(function(hitbox, index){
								if (hitbox.TickStart < ff && hitbox.TickEnd >= ff) {
									if (hitbox.Flag == "HorizontalSpeed") speedx = hitbox.Amount;
									else if (hitbox.Flag == "HorizontalAcceleration") accelx = hitbox.Amount;
									else if (hitbox.Flag == "VerticalSpeed") speedy = hitbox.Amount;
									else if (hitbox.Flag == "VerticalAcceleration") accely = hitbox.Amount;
								}
							});
							movex += speedx;
							movey += speedy;
							movey = Math.max(0,movey);
							speedx += accelx;
							speedy += accely;
						}
					}
					
					stageg.attr("transform","translate("+(100+movex*100)+","+(350-movey*100)+")");
					if (remove!==false || stageframe==1) {
					stagestat.selectAll("*").remove();
					stagestat.append("tspan").attr("x","98%").attr("dy","1.5em").style("fill","#999").text(movex.toFixed(10) + ", " + movey.toFixed(4) + " = X, Y");
					if (statpush != null) stagestat.append("tspan").attr("x","98%").attr("dy","1.5em").style("fill","#990").text((statpush).toFixed(4) + " = PUSH");
					if (stathurt != null) stagestat.append("tspan").attr("x","98%").attr("dy","1.5em").style("fill","#090").text((stathurt).toFixed(4) + " = HURT");
					if (stathurtthrow != null) stagestat.append("tspan").attr("x","98%").attr("dy","1.5em").style("fill","#099").text((stathurtthrow).toFixed(4) + " = THROW");
					if (stathit != null) stagestat.append("tspan").attr("x","98%").attr("dy","1.5em").style("fill","#c33").text((stathit).toFixed(4) + " = HIT");
					if (statthrow != null) stagestat.append("tspan").attr("x","98%").attr("dy","1.5em").style("fill","#33c").text((statthrow).toFixed(4) + " = THROW");
					if (movescript.Type1s != null)
					movescript.Type1s.forEach(function(hitbox, index){
						if (hitbox.TickStart < stageframe && hitbox.TickEnd >= stageframe) {
							if ((hitbox.Flag1 & 2) == 2) stagestat.append("tspan").attr("x","98%").attr("dy","1.5em").style("fill","#963").text("CROUCH");
							if ((hitbox.Flag1 & 4) == 4) stagestat.append("tspan").attr("x","98%").attr("dy","1.5em").style("fill","#099").text("AIR");
							if ((hitbox.Flag1 & 32) == 32) stagestat.append("tspan").attr("x","98%").attr("dy","1.5em").style("fill","#900").text("CH");
						}
					});	
					}
				}
				//fileol.attr("id","FRAMETABLEOL");//style("width","50em").style("overflow","auto");
				var scriptlist = fileol.append("li").attr("value",movescript.Index).classed("pre-wrap", true);
				var ticks = movescript.TotalTicks;
				var IASA = movescript.InterruptFrame == -1 ? ticks : (movescript.InterruptFrame+1);

				var framediv = scriptlist.append("div").style("overflow-x","scroll").on("scroll",function() {
						var iasarow = d3.select("#FRAME-IASA");
						var start = iasarow.select("td").node().offsetLeft;
						var end = iasarow.select("td:last-child").node().offsetLeft;
						var frames = iasarow.selectAll("td").size();
						var width = (end - start) / (frames-1);
						var stageframe = 1;
						// stageframe = 
						stageframe = Math.floor(this.scrollLeft / width + 1);
						if (stageframe < 1) stageframe = 1;
						if (stageframe > frames) stageframe = frames;
						if (stageframe == stagelist.attr("value")) return;
						stagelist.attr("value", stageframe); // console.log(stageframe); console.log(this.scrollLeft + "/" + start + "/" + end + "/" + width + "/" + frames);
						UCHITBOX(stageframe);
					}).on("mousewheel", function(){
						if (d3.event.deltaY != 0) {
							var iasarow = d3.select("#FRAME-IASA");
							var start = iasarow.select("td").node().offsetLeft;
							var end = iasarow.select("td:last-child").node().offsetLeft;
							var frames = iasarow.selectAll("td").size();
							var width = (end - start) / (frames-1);
							this.scrollLeft += d3.event.deltaY > 0 ? width : -width;
							d3.event.preventDefault();
						}
					});
				var frametable = framediv.append("table").attr("id","FRAMETABLE").style("padding-right","95%");
				var framehead = frametable.append("thead").append("tr").style("color","#ccc");
				var framebody = frametable.append("tbody").style("color","#999");
				// framehead.append("th").text("FRAME"); framehead.selectAll("td").data(d3.range(1,ticks+1)).enter().append("td").text(function(d){return d;});//.style("width","1.5em");
				var framerow = framebody.append("tr").attr("id","FRAME-IASA"); framerow.append("th").text("IASA"); framerow.selectAll("td").data(d3.range(1,ticks+1)).enter().append("td").text(function(d){return d;}); frametable.selectAll("#FRAME-IASA td").data(d3.range(IASA+1,ticks+1), function(d){return d;}).style("color", "#eee");
				var framerow = framebody.append("tr").attr("id","FRAME-PROX"); framerow.append("th").text("PROXIMITY"); framerow.selectAll("td").data(d3.range(1,ticks+1), function(d){ return d;}).enter().append("td").text(function(d){return d;});
				var framerow = framebody.append("tr").attr("id","FRAME-HIT"); framerow.append("th").text("HIT"); framerow.selectAll("td").data(d3.range(1,ticks+1), function(d){ return d;}).enter().append("td").text(function(d){return d;});					
				var framerow = framebody.append("tr").attr("id","FRAME-PROJ"); framerow.append("th").text("PROJ"); framerow.selectAll("td").data(d3.range(1,ticks+1), function(d){ return d;}).enter().append("td").text(function(d){return d;});
				var framerow = framebody.append("tr").attr("id","FRAME-THROW"); framerow.append("th").text("THROW"); framerow.selectAll("td").data(d3.range(1,ticks+1), function(d){ return d;}).enter().append("td").text(function(d){return d;});

				var framerow = framebody.append("tr").attr("id","FRAME-HURT-HIT"); framerow.append("th").text("HURT HIT"); framerow.selectAll("td").data(d3.range(1,ticks+1), function(d){ return d;}).enter().append("td").text(function(d){return d;});
				var framerow = framebody.append("tr").attr("id","FRAME-HURT-PROJ"); framerow.append("th").text("HURT PROJ"); framerow.selectAll("td").data(d3.range(1,ticks+1), function(d){ return d;}).enter().append("td").text(function(d){return d;});
				var framerow = framebody.append("tr").attr("id","FRAME-HURT-THROW"); framerow.append("th").text("HURT THROW"); framerow.selectAll("td").data(d3.range(1,ticks+1), function(d){ return d;}).enter().append("td").text(function(d){return d;});
				var framerow = framebody.append("tr").attr("id","FRAME-HURT-ARMOR"); framerow.append("th").text("HURT ARMOR"); framerow.selectAll("td").data(d3.range(1,ticks+1), function(d){ return d;}).enter().append("td").text(function(d){return d;});

				if (movescript.Type1s != null)
				movescript.Type1s.forEach(function(hitbox, index){
					if ((hitbox.Flag1 & 2) == 2) frametable.selectAll("#FRAME-IASA td").data(d3.range(hitbox.TickStart+1,hitbox.TickEnd+1), function(d){return d;}).style("background-color","#fff8dc");
					if ((hitbox.Flag1 & 4) == 4) frametable.selectAll("#FRAME-IASA td").data(d3.range(hitbox.TickStart+1,hitbox.TickEnd+1), function(d){return d;}).style("background-color","#eff");
					if ((hitbox.Flag1 & 32) == 32) frametable.selectAll("#FRAME-PROX td").data(d3.range(hitbox.TickStart+1,hitbox.TickEnd+1), function(d){return d;}).style("color","#c00");
				});
				if (movescript.Hitboxes != null)
				movescript.Hitboxes.forEach(function(hitbox, index){
					var bgcolor = hitbox.HitType == 4 ? "#eee" : hitbox.HitType == 3 ? "#eee" : hitbox.HitType == 0 ? "#fdd" : hitbox.HitType == 1 ? "#fed" : hitbox.HitType == 2 ? "#ddf" : "#ffd";
					if (hitbox.HitType == 4) frametable.selectAll("#FRAME-PROX td").data(d3.range(hitbox.TickStart+1,hitbox.TickEnd+1), function(d){return d;}).style("background-color",bgcolor);
					else if (hitbox.HitType == 3) frametable.selectAll("#FRAME-PROX td").data(d3.range(hitbox.TickStart+1,hitbox.TickEnd+1), function(d){return d;}).style("background-color",bgcolor);
					else if (hitbox.HitType == 0) frametable.selectAll("#FRAME-HIT td").data(d3.range(hitbox.TickStart+1,hitbox.TickEnd+1), function(d){return d;}).style("background-color",bgcolor);
					else if (hitbox.HitType == 1) frametable.selectAll("#FRAME-PROJ td").data(d3.range(hitbox.TickStart+1,hitbox.TickEnd+1), function(d){return d;}).style("background-color",bgcolor);
					else if (hitbox.HitType == 2) frametable.selectAll("#FRAME-THROW td").data(d3.range(hitbox.TickStart+1,hitbox.TickEnd+1), function(d){return d;}).style("background-color",bgcolor);
					else {
						var framerow = framebody.append("tr").attr("id","FRAME-HITBOX"); framerow.append("th").text("HIT BOX " + hitbox.HitType); framerow.selectAll("td").data(d3.range(1,ticks+1), function(d){ return d;}).enter().append("td").text(function(d){return d;});
						framerow.selectAll("td").data(d3.range(hitbox.TickStart+1,hitbox.TickEnd+1), function(d){return d;}).style("background-color",bgcolor);
					}

				});
				if (movescript.Hurtboxes != null)
				movescript.Hurtboxes.forEach(function(hitbox, index){
					var bgcolor = hitbox.Flag1 == 4 ? "#dff" : hitbox.Flag1 == 3 ? "#dfd" : hitbox.Flag1 == 1 ? "#fed" : "";
					if ((hitbox.Flag1 & 1) == 1) frametable.selectAll("#FRAME-HURT-HIT td").data(d3.range(hitbox.TickStart+1,hitbox.TickEnd+1), function(d){return d;}).style("background-color","#dfd");
					if ((hitbox.Flag1 & 2) == 2) frametable.selectAll("#FRAME-HURT-PROJ td").data(d3.range(hitbox.TickStart+1,hitbox.TickEnd+1), function(d){return d;}).style("background-color","#fed");
					if ((hitbox.Flag1 & 4) == 4) frametable.selectAll("#FRAME-HURT-THROW td").data(d3.range(hitbox.TickStart+1,hitbox.TickEnd+1), function(d){return d;}).style("background-color","#dff");
					if (hitbox.HitEffect > 0) frametable.selectAll("#FRAME-HURT-ARMOR td").data(d3.range(hitbox.TickStart+1,hitbox.TickEnd+1), function(d){return d;}).style("background-color","#fef").text(hitbox.HitEffect);
					if ((hitbox.Flag1 & 1) == 1 && (hitbox.Unknown6 & 4) == 4) frametable.selectAll("#FRAME-HURT-HIT td").data(d3.range(hitbox.TickStart+1,hitbox.TickEnd+1), function(d){return d;}).style("color","#3cc");
					if ((hitbox.Flag1 & 4) == 4 && (hitbox.Unknown6 & 4) == 4) frametable.selectAll("#FRAME-HURT-THROW td").data(d3.range(hitbox.TickStart+1,hitbox.TickEnd+1), function(d){return d;}).style("color","#3cc");

				});
				if (movescript.Cancels != null)
				movescript.Cancels.forEach(function(cancel, index){
					var bgcolor = cancel.Type == 8 ? "#fed" : cancel.Type == 7 ? "#dff" : cancel.Type == 3 ? "#ffd" :"#dfd";
					if (cancel.Type == 8 || cancel.Type == 7 || true) {
						var framerow = framebody.append("tr").attr("id","FRAME-CANCEL"); framerow.append("th").text("CANCEL " + cancel.Type); framerow.selectAll("td").data(d3.range(1,ticks+1), function(d){ return d;}).enter().append("td").text(function(d){return d;});
						framerow.selectAll("td").data(d3.range(cancel.TickStart+1,cancel.TickEnd+1), function(d){return d;}).style("background-color",bgcolor).text(cancel.CancelList);
						if (cancel.Type == 8) if (cancel.CancelList >= 0) fileol.append("div").classed("CANCELDIV",true).text("* "+data2.CancelLists[cancel.CancelList].CancelIndexNames);
						if (cancel.Type == 8) framerow.selectAll("td").data(d3.range(cancel.TickEnd+1,ticks+1), function(d){return d;}).style("color","#ccc").text(function(d,i){ return d - cancel.TickStart - 1; });
					}
				});
				if (movescript.AutoCancels != null)
				movescript.AutoCancels.forEach(function(cancel, index){
					var bgcolor = "#ffd";
					var framerow = framebody.append("tr").attr("id","FRAME-CANCEL"); framerow.append("th").text("AUTO"); framerow.selectAll("td").data(d3.range(1,ticks+1), function(d){ return d;}).enter().append("td").text(function(d){return d;});
					framerow.selectAll("td").data(d3.range(cancel.TickStart+1,cancel.TickEnd+1), function(d){return d;}).style("background-color",bgcolor).text(cancel.MoveIndex);
					fileol.append("div").classed("AUTOCANCELDIV",true).text("* " + "AutoCancel Script: " + cancel.MoveIndex + (" ") + ", Frame: " + (cancel.Unknown1+1) + ", Condition: " + cancel.Condition).on("click",function(){d3.select("#SCRIPT"+cancel.MoveIndex).node().click();});
				});
				if (movescript.Others != null)
				movescript.Others.forEach(function(other, index){
					if (other.Unknown2 != 3) return;
					var bgcolor = "#fdd";
					var framerow = framebody.append("tr").attr("id","FRAME-OTHER"); framerow.append("th").text("EFFECT PROJ"); framerow.selectAll("td").data(d3.range(1,ticks+1), function(d){ return d;}).enter().append("td").text(function(d){return d;});
					framerow.selectAll("td").data(d3.range(other.TickStart+1,other.TickEnd+1), function(d){return d;}).style("background-color",bgcolor);//.text(other.MoveIndex);
					// fileol.append("div").classed("CANCELDIV",true).text("* " + "Other: " + other.MoveIndex + ", Condition: " + other.Condition);
				});			
				// if (movescript.Others != null)
				// movescript.Others.forEach(function(other, index){
				// 	if (other.Unknown1 != 1 || other.Unknown2 != 0) return;
				// 	// if (other.Ints[1] != other.Ints[2]) return;
				// 	if (other.Ints[3] != 0) return;
				// 	var bgcolor = "#ddf";
				// 	var framerow = framebody.append("tr").attr("id","FRAME-FREEZE"); framerow.append("th").text("FREEZE"); framerow.selectAll("td").data(d3.range(1,ticks+1), function(d){ return d;}).enter().append("td").text(function(d){return d;});
				// 	framerow.selectAll("td").data(d3.range(other.TickStart+1,other.TickEnd+1+other.Ints[2]+Math.floor(other.Ints[2]/other.Ints[1])), function(d){return d;}).style("background-color",bgcolor);//.text(other.TickStart+1);
				// 	framerow.selectAll("td").data(d3.range(other.TickEnd+1+other.Ints[2]+Math.floor(other.Ints[2]/other.Ints[1]),ticks+1), function(d){return d;}).text(function(d,i){return i+1+other.TickStart;});
				// 	// fileol.append("div").classed("CANCELDIV",true).text("* " + "Other: " + other.MoveIndex + ", Condition: " + other.Condition);
				// });
			}
			function UCSCRIPT(movescript, fileol) {
				var scriptdiv = fileol.append("li").attr("value",movescript.Index).append("div").style("display","flex").classed("pre-wrap", true);
				scriptdiv.append("div").style("flex","0 0 auto").text(JSON.stringify(movescript,null,2).split('"Hitboxes": ')[0]);
				scriptdiv.append("div").style("flex","0 0 auto").text(JSON.stringify({Hitboxes:movescript.Hitboxes},null,2)).style("background-color","#fee");
				scriptdiv.append("div").style("flex","0 0 auto").text(JSON.stringify({Hurtboxes:movescript.Hurtboxes},null,2)).style("background-color","#efe");
				if (movescript.Cancels) scriptdiv.append("div").style("flex","0 0 auto").text(JSON.stringify({Cancels:movescript.Cancels},null,2));
				if (movescript.AutoCancels) scriptdiv.append("div").style("flex","0 0 auto").text(JSON.stringify({AutoCancels:movescript.AutoCancels},null,2));
				if (movescript.PhysicsBoxes) scriptdiv.append("div").style("flex","0 0 auto").text(JSON.stringify({PhysicsBoxes:movescript.PhysicsBoxes},null,2)).style("background-color","#ffe");
				if (movescript.Positions) scriptdiv.append("div").style("flex","0 0 auto").text(JSON.stringify({Positions:movescript.Positions},null,2));
				if (movescript.Others) scriptdiv.append("div").style("flex","0 0 auto").text(JSON.stringify({Others:movescript.Others},null,2));
				if (movescript.VisualEffects) scriptdiv.append("div").style("flex","0 0 auto").text(JSON.stringify({VisualEffects:movescript.VisualEffects},null,2));
			}
			SCRIPTBOX.append("div").text("MOVES");
			SCRIPTBOX.append("ol").attr("id","MOVEOL").selectAll("li").data(data2.Moves.filter(function(a){return a != null;})).enter()
				.append("li").attr("id",function(d){return "MOVE"+d.Index}).text(function(d){return d.Name;}).attr("value", function(d){return d.Index;})
				.on("click",function(d,i){
					if (!HASHCLICK) UCHASH(charfile + "/MOVE/" + d.Index + "/" + d.Name);
					// console.log(d);
					SCRIPTBOX.selectAll("li.DIFF2").classed("DIFF2",false);
					d3.select(this).classed("DIFF2",true);
					FILEDIV.selectAll("*").remove();

					var movescriptlist = d.Unknown8 == 2 ? 1 : 0;
					var movescript = data1.MoveLists[d.Unknown8 == 2 ? 1 : 0].Moves[d.ScriptIndex] || data1.MoveLists[0].Moves[d.ScriptIndex];
					UCSCRIPTTABLE(movescript, FILEDIV, movescriptlist);


					FILEDIV.append("div").text("MOVE");
					var fileol = FILEDIV.append("ol");
					fileol.append("li").text(JSON.stringify(d,null,2)).attr("value",d.Index);
					fileol.append("li").text(JSON.stringify({ Bin:{Input:DEC2BIN(d.Input), InputFlags:DEC2BIN(d.InputFlags)}, Hex:{Input:d.Input.toString(16), InputFlags:d.InputFlags.toString(16)} },null,2)).attr("value",d.Index);
					if (d.InputMotionIndex >= 0) {
						var moveinput = data2.Inputs[d.InputMotionIndex];
						FILEDIV.append("div").text("INPUT");
						var fileol = FILEDIV.append("ol").style("overflow-x", "auto");
						fileol.append("li").text(JSON.stringify(moveinput,null,2).split("\"InputEntries\": ")[0] + "\"InputEntries\": [ ... ]").attr("value",moveinput.Index);//.style("white-space", "nowrap");
						// fileol.append("li").text(JSON.stringify(d,null,2)).attr("value",moveinput.Index).classed("pre-wrap",true);

						// FILEDIV.append("div").text("INPUT ENTRY");
						// var fileol = FILEDIV.append("ol");
						// var inputdiv = fileol.append("li").attr("value",moveinput.Index).append("div").style("display","flex").classed("pre-wrap", true);
						// if (moveinput.InputEntries != null)
						// moveinput.InputEntries.forEach(function(input){
						// 	inputdiv.append("div").classed("pre-wrap", true).text(JSON.stringify(input,null,2));	
						// });
						if (moveinput.InputEntries != null)
						moveinput.InputEntries.forEach(function(inputentry,entryindex){
							if (inputentry.InputParts != null)
							inputentry.InputParts.forEach(function(input,index){
								if (entryindex % 2 == 0)
									fileol.append("li").text((index+1)+". "+JSON.stringify(input,null,2)).attr("value",entryindex+1).style("background-color","#ffe").style("white-space", "nowrap");
								else
									fileol.append("li").text((index+1)+". "+JSON.stringify(input,null,2)).attr("value",entryindex+1).style("white-space", "nowrap");	
							});
						});
					}
					FILEDIV.append("div").text("SCRIPT");
					var fileol = FILEDIV.append("ol");
					var movescript = data1.MoveLists[d.Unknown8 == 2 ? 1 : 0].Moves[d.ScriptIndex] || data1.MoveLists[0].Moves[d.ScriptIndex];
					UCSCRIPT(movescript, fileol);
				});
			SCRIPTBOX.append("div").text("CHARGES");
			SCRIPTBOX.append("ol").attr("id","CHARGEOL").selectAll("li").data(data2.Charges.filter(function(a){return a != null;})).enter()
				.append("li").attr("id",function(d){return "CHARGE"+d.Index}).text(function(d){return d.InputString + " " + d.ChargeFrames + "F";}).attr("value", function(d){return d.Index;})
				.on("click",function(d,i){
					if (!HASHCLICK) UCHASH(charfile + "/CHARGE/" + d.Index);
					// console.log(d);
					SCRIPTBOX.selectAll("li.DIFF2").classed("DIFF2",false);
					d3.select(this).classed("DIFF2",true);
					FILEDIV.selectAll("*").remove();
					FILEDIV.append("div").text("CHARGE");
					var fileol = FILEDIV.append("ol");
					fileol.append("li").text(JSON.stringify(d,null,2)).attr("value",d.Index);
					fileol.append("li").text(JSON.stringify(d,null,2)).attr("value",d.Index).classed("pre-wrap",true);
				});
			SCRIPTBOX.append("div").text("INPUTS");
			SCRIPTBOX.append("ol").attr("id","INPUTOL").selectAll("li").data(data2.Inputs.filter(function(a){return a != null;})).enter()
				.append("li").attr("id",function(d){return "INPUT"+d.Index}).text(function(d){return d.Name || "[" + d.InputEntries.length + "]";}).attr("value", function(d){return d.Index;})
				.on("click",function(d,i){
					if (!HASHCLICK) UCHASH(charfile + "/INPUT/" + d.Index);
					// console.log(d);
					SCRIPTBOX.selectAll("li.DIFF2").classed("DIFF2",false);
					d3.select(this).classed("DIFF2",true);
					FILEDIV.selectAll("*").remove();
					FILEDIV.append("div").text("INPUT");
					var fileol = FILEDIV.append("ol");
					fileol.append("li").text(JSON.stringify(d,null,2)).attr("value",d.Index);
					// fileol.append("li").text(JSON.stringify(d,null,2)).attr("value",d.Index).classed("pre-wrap",true);

					FILEDIV.append("div").text("INPUT ENTRY");
					var fileol = FILEDIV.append("ol");
					var inputdiv = fileol.append("li").attr("value",d.Index).append("div").style("display","flex").classed("pre-wrap", true);
					if (d.InputEntries != null)
					d.InputEntries.forEach(function(input){
						inputdiv.append("div").classed("pre-wrap", true).text(JSON.stringify(input,null,2));	
					});

					FILEDIV.append("div").text("MOVE");
					var fileol = FILEDIV.append("ol");
					data2.Moves.forEach(function(move, index) {
						if (move == null) return;
						if (move.InputMotionIndex != d.Index) return;
						fileol.append("li").text(JSON.stringify({ Name: move.Name, Move: move },null,2)).attr("value", move.Index);
					});

				});
			SCRIPTBOX.append("div").text("CANCEL LISTS");
			SCRIPTBOX.append("ol").attr("id","CANCELOL").selectAll("li").data(data2.CancelLists.filter(function(a){return a.Cancels != null})).enter()
				.append("li").attr("id",function(d){return "CANCEL"+d.Index}).text(function(d){return d.CancelIndexNames.replace(/.* Names: /,"");}).attr("value", function(d){return d.Index;})
				.on("click",function(d,i){
					if (!HASHCLICK) UCHASH(charfile + "/CANCEL/" + d.Index);
					// console.log(d);
					SCRIPTBOX.selectAll("li.DIFF2").classed("DIFF2",false);
					d3.select(this).classed("DIFF2",true);
					FILEDIV.selectAll("*").remove();
					FILEDIV.append("div").text("CANCEL LIST");
					var fileol = FILEDIV.append("ol");
					fileol.append("li").text(JSON.stringify(d,null,2).split("\"Cancels\": ")[0] + " \"Cancels\": [ ... ]").attr("value",d.Index);

					FILEDIV.append("div").text("SCRIPT AUTOCANCEL");
					var fileol = FILEDIV.append("ol");
					data1.MoveLists.forEach(function(ML){
						ML.Moves.forEach(function(move, index) {
							if (move == null) return;
							if (move.AutoCancels == null) return;
							move.AutoCancels.forEach(function(cancel, index){
								if (cancel.CancelList != d.Index) return;
								fileol.append("li").text(JSON.stringify({ Name: move.Name, Cancel: cancel },null,2)).attr("value", move.Index);
								// console.log(cancel);
							});
						});
					});	
					FILEDIV.append("div").text("SCRIPT CANCEL");
					var fileol = FILEDIV.append("ol");
					data1.MoveLists.forEach(function(ML){
						ML.Moves.forEach(function(move, index) {
							if (move == null) return;
							if (move.Cancels == null) return;
							move.Cancels.forEach(function(cancel, index){
								if (cancel.CancelList != d.Index) return;
								fileol.append("li").text(JSON.stringify({ Name: move.Name, Cancel: cancel },null,2)).attr("value", move.Index);
								// console.log(cancel);
							});
						});
					});

					FILEDIV.append("div").text("CANCEL " + d.Cancels.length);
					var fileol = FILEDIV.append("ol");
					// var cancellist = fileol.append("li").attr("value",d.Index).classed("pre-wrap", true);
					// var canceldiv = fileol.append("li").attr("value",d.Index).append("div").style("display","flex").classed("pre-wrap", true);
					if (d.Cancels != null)
					d.Cancels.forEach(function(cancel){
						fileol.append("li").attr("value",cancel.Index).classed("pre-wrap", true).text(JSON.stringify(cancel,null,2));	
					});
				});

			var hitboxes_eff = {};
			var hitboxesall_eff = {};
			data3.MoveLists.forEach(function(ML){
				ML.Moves.forEach(function(move, index) {
					if (move == null) return;
					if (move.Hitboxes == null) return;
					move.Hitboxes.forEach(function(hitbox, index){
						if (hitboxes_eff[hitbox.HitboxEffectIndex] == null) {
							hitboxes_eff[hitbox.HitboxEffectIndex] = move.Name;
							hitboxesall_eff[hitbox.HitboxEffectIndex] = move.Name;
						}
						else
							hitboxesall_eff[hitbox.HitboxEffectIndex] += ", " + move.Name;
					});
				});
			});

			SCRIPTBOX.append("div").text("EFF HITBOX EFFECTS");
			SCRIPTBOX.append("ol").attr("id","EFFHITBOXEFFECTOL").selectAll("li").data(data3.HitboxEffectses.filter(function(a){return a.HIT_STAND != null})).enter()
				.append("li").attr("id",function(d){return "EFFECTEFF"+d.Index}).text(function(d){return hitboxesall_eff[d.Index];}).attr("value", function(d){return d.Index;})
				.on("click",function(d,i){
					if (!HASHCLICK) UCHASH(charfile + "/EFFECT/EFF" + d.Index);
					// console.log(d);
					SCRIPTBOX.selectAll("li.DIFF2").classed("DIFF2",false);
					d3.select(this).classed("DIFF2",true);
					FILEDIV.selectAll("*").remove();

					FILEDIV.append("div").text("EFF HITBOX EFFECT");
					var fileol = FILEDIV.append("ol");
					var effectdiv = fileol.append("li").attr("value",d.Index).append("div").style("display","flex").classed("pre-wrap", true);
					effectdiv.append("div").style("flex","0 0 auto").text(JSON.stringify({HIT_STAND:d.HIT_STAND},null,2)).style("background-color","#fee");
					effectdiv.append("div").style("flex","0 0 auto").text(JSON.stringify({COUNTERHIT_STAND:d.COUNTERHIT_STAND},null,2)).style("background-color","#ffe");
					effectdiv.append("div").style("flex","0 0 auto").text(JSON.stringify({GUARD_STAND:d.GUARD_STAND},null,2)).style("background-color","#efe");

					FILEDIV.append("div").text("SCRIPT HITBOX");
					data3.MoveLists.forEach(function(ML,mli){
						if (mli == 1) FILEDIV.append("div").text("SCRIPTS VT HITBOX");
						var fileol = FILEDIV.append("ol");
						ML.Moves.forEach(function(move, index) {
							if (move == null) return;
							if (move.Hitboxes == null) return;
							move.Hitboxes.forEach(function(hitbox, index){
								if (hitbox.HitboxEffectIndex == d.Index) {
									fileol.append("li").text(JSON.stringify({Name:move.Name,Hitbox:hitbox},null,2)).attr("value",move.Index);//.classed("pre-wrap",true);
								}
							});
						});
					});

					FILEDIV.append("div").text("HITBOX EFFECT");					
					var fileol = FILEDIV.append("ol");
					fileol.append("li").text(JSON.stringify(d,null,2)).attr("value",d.Index).classed("pre-wrap",true);
				});

			SCRIPTBOX.append("div").text("EFF SCRIPTS");
			data3.MoveLists.forEach(function(ML,mli){
				if (mli == 1) SCRIPTBOX.append("div").text("SCRIPTS EFF");
				SCRIPTBOX.append("ol").attr("id","EFFSCRIPTOL").selectAll("li").data(ML.Moves.filter(function(a){return a != null;})).enter()
					.append("li").attr("id",function(d){return "SCRIPTEFF"+(mli==1?"VT":"")+d.Index;}).text(function(d){return d.Name;}).attr("value", function(d){return d.Index;})
					.on("click",function(d,i){
						if (!HASHCLICK) UCHASH(charfile + "/SCRIPT/EFF" + (mli==1?"VT":"") + d.Index + (d.Index != d.Name ? "/" + d.Name : ""));
						// console.log(d);
						SCRIPTBOX.selectAll("li.DIFF2").classed("DIFF2",false);
						d3.select(this).classed("DIFF2",true);
						FILEDIV.selectAll("*").remove();

						UCSCRIPTTABLE(d, FILEDIV, mli);

						FILEDIV.append("div").text("EFF SCRIPT");
						var fileol = FILEDIV.append("ol");
						fileol.append("li").text(JSON.stringify(d,null,2).split("\"AutoCancels\":")[0]).attr("value",d.Index);
						UCSCRIPT(d, fileol);
					});
			});


			var hitboxlist = [];
			var hitboxes = {};
			var hitboxesall = {};
			data1.MoveLists.forEach(function(ML,mli){
				ML.Moves.forEach(function(move, index) {
					if (move == null) return;
					if (move.Hitboxes == null) return;
					var scriptid = (mli == 1 ? "VT":"") + index;
					move.Hitboxes.forEach(function(hitbox, index){
						hitboxlist.push({scriptid:scriptid,script:move,hitbox:hitbox,index:index});
						if (hitboxes[hitbox.HitboxEffectIndex] == null) {
							hitboxes[hitbox.HitboxEffectIndex] = move.Name;
							hitboxesall[hitbox.HitboxEffectIndex] = move.Name;
						}
						else
							hitboxesall[hitbox.HitboxEffectIndex] += ", " + move.Name;
					});
				});
			});

			var hurtboxlist = [];
			data1.MoveLists.forEach(function(ML,mli){
				ML.Moves.forEach(function(move, index) {
					if (move == null) return;
					if (move.Hurtboxes == null) return;
					var scriptid = (mli == 1 ? "VT":"") + index;
					move.Hurtboxes.forEach(function(hurtbox, index){
						hurtboxlist.push({scriptid:scriptid,script:move,hurtbox:hurtbox,index:index,mli:mli});
					});
				});
			});

			var type1slist = [];
			data1.MoveLists.forEach(function(ML,mli){
				ML.Moves.forEach(function(move, index) {
					if (move == null) return;
					if (move.Type1s == null) return;
					var scriptid = (mli == 1 ? "VT":"") + index;
					move.Type1s.forEach(function(hurtbox, index){
						type1slist.push({scriptid:scriptid,script:move,hurtbox:hurtbox,index:index,mli:mli});
					});
				});
			});

			var nopushlist = [];
			data1.MoveLists.forEach(function(ML,mli){
				ML.Moves.forEach(function(move, index) {
					if (move == null) return;
					if (move.PhysicsBoxes != null) return;
					var scriptid = (mli == 1 ? "VT":"") + index;
					nopushlist.push({scriptid:scriptid,script:move,index:index});
				});
			});	

			var autocancellist = [];
			data1.MoveLists.forEach(function(ML,mli){
				ML.Moves.forEach(function(move, index) {
					if (move == null) return;
					if (move.AutoCancels == null) return;
					var scriptid = (mli == 1 ? "VT":"") + index;
					move.AutoCancels.forEach(function(hitbox, index){
						autocancellist.push({scriptid:scriptid,script:move,autocancel:hitbox,index:index});
					});
				});
			});

			SCRIPTBOX.append("div").text("HITBOX EFFECTS");
			SCRIPTBOX.append("ol").attr("id","HITBOXEFFECTOL").selectAll("li").data(data1.HitboxEffectses.filter(function(a){return a.HIT_STAND != null})).enter()
				.append("li").attr("id",function(d){return "EFFECT"+d.Index}).text(function(d){return hitboxesall[d.Index];}).attr("value", function(d){return d.Index;})
				.on("click",function(d,i){
					if (!HASHCLICK) UCHASH(charfile + "/EFFECT/" + d.Index);
					// console.log(d);
					SCRIPTBOX.selectAll("li.DIFF2").classed("DIFF2",false);
					d3.select(this).classed("DIFF2",true);
					FILEDIV.selectAll("*").remove();

					FILEDIV.append("div").text("HITBOX EFFECT");
					var fileol = FILEDIV.append("ol");
					var effectdiv = fileol.append("li").attr("value",d.Index).append("div").style("display","flex").classed("pre-wrap", true);
					effectdiv.append("div").style("flex","0 0 auto").text(JSON.stringify({HIT_STAND:d.HIT_STAND},null,2)).style("background-color","#fee");
					effectdiv.append("div").style("flex","0 0 auto").text(JSON.stringify({COUNTERHIT_STAND:d.COUNTERHIT_STAND},null,2)).style("background-color","#ffe");
					effectdiv.append("div").style("flex","0 0 auto").text(JSON.stringify({GUARD_STAND:d.GUARD_STAND},null,2)).style("background-color","#efe");

					FILEDIV.append("div").text("SCRIPT HITBOX");
					data1.MoveLists.forEach(function(ML,mli){
						if (mli == 1) FILEDIV.append("div").text("SCRIPTS VT HITBOX");
						var fileol = FILEDIV.append("ol");
						ML.Moves.forEach(function(move, index) {
							if (move == null) return;
							if (move.Hitboxes == null) return;
							move.Hitboxes.forEach(function(hitbox, index){
								if (hitbox.HitboxEffectIndex == d.Index) {
									fileol.append("li").text(JSON.stringify({Name:move.Name,Hitbox:hitbox},null,2)).attr("value",move.Index);//.classed("pre-wrap",true);
								}
							});
						});
					});

					FILEDIV.append("div").text("HITBOX EFFECT");					
					var fileol = FILEDIV.append("ol");
					fileol.append("li").text(JSON.stringify(d,null,2)).attr("value",d.Index).classed("pre-wrap",true);
				});

			SCRIPTBOX.append("div").text("SCRIPTS");
			data1.MoveLists.forEach(function(ML,mli){
				if (mli == 1) SCRIPTBOX.append("div").text("SCRIPTS VT");
				SCRIPTBOX.append("ol").attr("id","SCRIPTOL").selectAll("li").data(ML.Moves.filter(function(a){return a != null;})).enter()
					.append("li").attr("id",function(d){return "SCRIPT"+(mli==1?"VT":"")+d.Index;}).text(function(d){return d.Name;}).attr("value", function(d){return d.Index;})
					.on("click",function(d,i){
						if (!HASHCLICK) UCHASH(charfile + "/SCRIPT/" + (mli==1?"VT":"") + d.Index + (d.Index != d.Name ? "/" + d.Name : ""));
						// console.log(d);
						SCRIPTBOX.selectAll("li.DIFF2").classed("DIFF2",false);
						d3.select(this).classed("DIFF2",true);
						FILEDIV.selectAll("*").remove();

						UCSCRIPTTABLE(d, FILEDIV, mli);

						FILEDIV.append("div").text("SCRIPT");
						var fileol = FILEDIV.append("ol");
						fileol.append("li").text(JSON.stringify(d,null,2).split("\"AutoCancels\":")[0]).attr("value",d.Index);
						UCSCRIPT(d, fileol);
					});
			});

			// if (data4 != null) // NOFD

			cfol.append("li").attr("id","MOVEINPUT").text("MOVE INPUT").attr("value",data2.Moves.length).on("click",function(d){
				if (!HASHCLICK) UCHASH(charfile + "/MOVE/INPUT");
				SCRIPTBOX.selectAll("li.DIFF2").classed("DIFF2",false);
				d3.select(this).classed("DIFF2",true);
				FILEDIV.selectAll("*").remove();
				FILEDIV.append("div").text("MOVE INPUT");
				var filegraph = FILEDIV.append("textarea").style("max-height","10em").style("overflow","auto");
				var filejson = FILEDIV.append("textarea").style("max-height","10em").style("overflow","auto").style("white-space","nowrap");
				// var fileul = FILEDIV.append("ul").style("overflow-x", "auto");
				// var filetable = fileul.append("li").append("table").classed("MOVEINPUTTABLE",true);
				var filetable = FILEDIV.append("table").classed("MOVEINPUTTABLE",true);
				var graphtext = "";
				var jsontext = "";

				filetable.selectAll("tr").data(data2.Moves.filter(function(a){return a != null;})).enter().append("tr").each(function(d,i){
					var movescript = data1.MoveLists[d.Unknown8 == 2 ? 1 : 0].Moves[d.ScriptIndex] || data1.MoveLists[0].Moves[d.ScriptIndex] || {Name:""};
					var filerow = d3.select(this);
					filerow.append("td").text(d.Index + ".");
					filerow.append("td").text(d.Name);
					// filerow.append("td").text(d.Unknown8);

					var incancellist = "";
					if (data2.CancelLists != null)
					data2.CancelLists.forEach(function(cancellist, cli){
						if (cancellist.Cancels == null) return;
						cancellist.Cancels.forEach(function(cancel){
							if (cancel.Index == d.Index) {
								filerow.classed("CANCELLIST"+cli,true);
								incancellist += "["+cli+"] ";
								return;
							}
						});
					});
					if (filerow.classed("CANCELLIST0")) {
						// filerow.append("td").text("[0]");
						graphtext += "CL000 -> M" + PAD3(d.Index) + "\n";
						// incancellist += "[0] ";
					} else if (filerow.classed("CANCELLIST1")) {
						// filerow.append("td").text("[1]");
						graphtext += "CL001 -> M" + PAD3(d.Index) + "\n";
						// incancellist += "[1] ";
					} else {
						// filerow.append("td").text("");
						// graphtext += "M" + PAD3(d.Index) + "\n";
						incancellist= "[ ] " + incancellist;
					}
					filerow.append("td").text(incancellist);


					var cancellist = "";
					var cancelset = d3.set();
					if (movescript.Cancels != null)
					movescript.Cancels.forEach(function(cancel){
						cancelset.add(cancel.CancelList);
					});
					cancelset.each(function(list){
						if (list == -1) return;
						cancellist += "[" + list + "] ";
						graphtext += "M" + PAD3(d.Index) + " -> CL" + PAD3(list) + "\n";
						if (data2.CancelLists[list].Cancels != null)
						data2.CancelLists[list].Cancels.forEach(function(cancel){
							cancellist += cancel.Index + ". ";
							graphtext += "CL" + PAD3(list) + " -> M" + PAD3(cancel.Index) + "\n";
						});
						// cancellist += " ";
						cancellist += "<br>";
					});
					filerow.append("td").html(cancellist.trim()).style("white-space", "nowrap").style("max-width","20em").style("overflow-x","auto");

					var motionindextd = filerow.append("td").text("").style("white-space", "nowrap");
            		if ((d.Input & 0x1000) == 0x1000) filerow.append("td").text("N").style("background-color", "#ccc"); else filerow.append("td");
            		if ((d.Input & 0x1) == 0x1) filerow.append("td").text("U").style("background-color", "#ccc"); else filerow.append("td");
            		if ((d.Input & 0x4) == 0x4) filerow.append("td").text("B").style("background-color", "#ccc"); else filerow.append("td");
            		if ((d.Input & 0x2) == 0x2) filerow.append("td").text("D").style("background-color", "#ccc"); else filerow.append("td");
            		if ((d.Input & 0x8) == 0x8) filerow.append("td").text("F").style("background-color", "#ccc"); else filerow.append("td");
            		if ((d.Input & 0x10) == 0x10) filerow.append("td").text("LP").style("background-color", "#ccf"); else filerow.append("td");
            		if ((d.Input & 0x20) == 0x20) filerow.append("td").text("MP").style("background-color", "#ffc"); else filerow.append("td");
            		if ((d.Input & 0x40) == 0x40) filerow.append("td").text("HP").style("background-color", "#fcc"); else filerow.append("td");
            		if ((d.Input & 0x80) == 0x80) filerow.append("td").text("LK").style("background-color", "#ccf"); else filerow.append("td");
            		if ((d.Input & 0x100) == 0x100) filerow.append("td").text("MK").style("background-color", "#ffc"); else filerow.append("td");
            		if ((d.Input & 0x200) == 0x200) filerow.append("td").text("HK").style("background-color", "#fcc"); else filerow.append("td");
					filerow.append("td").text(DEC2BIN(d.Input)).style("white-space", "nowrap");
					filerow.append("td").text(DEC2BIN(d.InputFlags)).style("white-space", "nowrap");
					// filerow.append("td").text(d.Input & 0xFFFFFC00);
					filerow.append("td").text(d.ScriptIndex);
					filerow.append("td").text(movescript.Name);

					var inputstring = "";
					if (d.InputMotionIndex >= 0) {
						var moveinput = data2.Inputs[d.InputMotionIndex];
						FILEDIV.append("div").text("INPUT " + d.Name);
						var fileol = FILEDIV.append("ol").style("overflow-x", "auto");
						fileol.append("li").text(JSON.stringify(moveinput,null,2).split("\"InputEntries\": ")[0] + "\"InputEntries\": [ ... ]").attr("value",moveinput.Index);//.style("white-space", "nowrap");
						if (moveinput.InputEntries != null)
						moveinput.InputEntries.forEach(function(inputentry,entryindex){
							if (inputentry.InputParts != null)
							inputentry.InputParts.forEach(function(input,index){
								if (entryindex == 2) {
									inputstring += " ";
									if (input.Input == 1) inputstring += "8";
									else if (input.Input == 1+8) inputstring += "9";
									else if (input.Input == 1+4) inputstring += "7";
									else if (input.Input == 0) inputstring += "5";
									else if (input.Input == 8) inputstring += "6";
									else if (input.Input == 4) inputstring += "4";
									else if (input.Input == 2) inputstring += "2";
									else if (input.Input == 2+8) inputstring += "3";
									else if (input.Input == 2+4) inputstring += "1";
								}
								if (entryindex % 2 == 0)
									fileol.append("li").text((index+1)+". "+JSON.stringify(input,null,2)).attr("value",entryindex+1).style("background-color","#ffe").style("white-space", "nowrap");
								else
									fileol.append("li").text((index+1)+". "+JSON.stringify(input,null,2)).attr("value",entryindex+1).style("white-space", "nowrap");	
							});
						});
						motionindextd.text("["+d.InputMotionIndex+"]"+inputstring);
					}

					// if ((d.InputFlags & 0x30)==0x00) // no button
					// if ((d.InputFlags & 0x30)==0x10) // any button
					// if ((d.InputFlags & 0x30)==0x20) // all button
					// if ((d.InputFlags & 0x30)==0x30) // two button
					// if ((d.InputFlags & 0x3)==0x0) // no direction
					// if ((d.InputFlags & 0x3)==0x1) // any direction
					// if ((d.InputFlags & 0x3)==0x2) // only direction
					// if ((d.InputFlags & 0x3)==0x3) // any direction

					if ((d.Input & 0x100F) == 0x0 && inputstring == "") inputstring += "5";
					if ((d.Input & 0x1000) == 0x1000) inputstring += "5";
					if ((d.Input & 0x1) == 0x1) inputstring += "8";
					if ((d.Input & 0x4) == 0x4) inputstring += "4";
					if ((d.Input & 0x2) == 0x2) inputstring += "2";
					if ((d.Input & 0x8) == 0x8) inputstring += "6";
					if ((d.Input & 0x10) == 0x10) inputstring += "LP";
					if ((d.Input & 0x20) == 0x20) inputstring += "MP";
					if ((d.Input & 0x40) == 0x40) inputstring += "HP";
					if ((d.Input & 0x80) == 0x80) inputstring += "LK";
					if ((d.Input & 0x100) == 0x100) inputstring += "MK";
					if ((d.Input & 0x200) == 0x200) inputstring += "HK";
					inputstring.replace("LPLK","TT");
					inputstring.replace("MPMK","VS");
					inputstring.replace("HPHK","VT");
					inputstring.replace("LPMPHP","PPP");
					inputstring.replace("LKMKHK","KKK");


				});
			

			});

			cfol.append("li").attr("id","HITBOXLIST").text("HITBOX LIST").attr("value",hitboxlist.length).on("click",function(d){
				if (!HASHCLICK) UCHASH(charfile + "/HITBOX/LIST");
				SCRIPTBOX.selectAll("li.DIFF2").classed("DIFF2",false);
				d3.select(this).classed("DIFF2",true);
				FILEDIV.selectAll("*").remove();
				FILEDIV.append("div").text("HITBOX LIST");

				var filetable = FILEDIV.append("table").classed("MOVEINPUTTABLE",true).style("text-align","center");
				var thead = ["#","ID","SCRIPT","#", "TickStart","TickEnd","X","Y","Z","Width","Height","Unk1","Unk2","Unk3","Unk4","Unk5","Unk6","Unk7","Unk8","Hits","Type","Juggle Limit","Juggle Increase","Flag4","Effect","Unk10","Unk11","Unk12"];
				filetable.append("thead").style("position","sticky").style("top","0").append("tr").selectAll("td").data(thead).enter().append("td").text(function(d){return d;})
				filetable.append("tbody").selectAll("tr").data(hitboxlist).enter().append("tr").each(function(d,i){
					var movescript = d.script;
					var hitbox = d.hitbox;
					var filerow = d3.select(this);
					if (hitbox.HitType == 3) filerow.classed("HITBOX-PROX",true);
					else if (hitbox.HitType == 4) filerow.classed("HITBOX-PROX",true);
					else if (hitbox.HitType == 0) filerow.classed("HITBOX-HIT",true);
					else if (hitbox.HitType == 1) filerow.classed("HITBOX-PROJ",true);
					else if (hitbox.HitType == 2) filerow.classed("HITBOX-THROW",true);
					else filerow.classed("HITBOX-LOL",true);
					filerow.append("td").text((i+1) + ".").style("color","#999");
					filerow.append("td").text(d.scriptid);
					filerow.append("td").text(movescript.Name);
					filerow.append("td").text(d.index).style("color","#999");
					filerow.append("td").text(hitbox.TickStart);
					filerow.append("td").text(hitbox.TickEnd);
					filerow.append("td").text(hitbox.X).style("color","#933");
					filerow.append("td").text(hitbox.Y).style("color","#393");
					filerow.append("td").text(hitbox.Z).style("color","#339");
					filerow.append("td").text(hitbox.Width).style("color","#933");
					filerow.append("td").text(hitbox.Height).style("color","#393");
					filerow.append("td").text(hitbox.Unknown1.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown2.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown3.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown4.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown5.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown6.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown7.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown8.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.NumberOfHits.toString(16)).style("color","#933");
					filerow.append("td").text(hitbox.HitType);
					filerow.append("td").text(hitbox.JuggleLimit).style("color","#339");
					filerow.append("td").text(hitbox.JuggleIncrease).style("color","#339");
					filerow.append("td").text(hitbox.Flag4);
					filerow.append("td").text(hitbox.HitboxEffectIndex);
					filerow.append("td").text(hitbox.Unknown10);
					filerow.append("td").text(hitbox.Unknown11);
					filerow.append("td").text(hitbox.Unknown12);
				});
			});

			cfol.append("li").attr("id","HURTBOXLIST").text("HURTBOX LIST").attr("value",hurtboxlist.length).on("click",function(d){
				if (!HASHCLICK) UCHASH(charfile + "/HURTBOX/LIST");
				SCRIPTBOX.selectAll("li.DIFF2").classed("DIFF2",false);
				d3.select(this).classed("DIFF2",true);
				FILEDIV.selectAll("*").remove();
				FILEDIV.append("div").text("HURTBOX LIST");
				var filetable = FILEDIV.append("table").classed("MOVEINPUTTABLE",true).style("text-align","center");
				var thead = ["#","ID","SCRIPT","#", "TickStart","TickEnd","X","Y","Z","Width","Height","Unk1","Unk2","Unk3","Unk4","Unk5","Unk6","Unk7","Unk8","Unk9","Flag1","Flag2","Flag3","Flag4","Effect","Unk10","Unk11","Unk12","Unk13"];
				filetable.append("thead").style("position","sticky").style("top","0").append("tr").selectAll("td").data(thead).enter().append("td").text(function(d){return d;})
				filetable.append("tbody").selectAll("tr").data(hurtboxlist).enter().append("tr").each(function(d,i){
					var movescript = d.script;
					var hitbox = d.hurtbox;
					var filerow = d3.select(this);
					if (hitbox.Flag1 == 3) filerow.classed("HURTBOX-HITPROJ",true);
					else if (hitbox.Flag1 == 4) filerow.classed("HURTBOX-THROW",true);
					else if (hitbox.Flag1 == 1) filerow.classed("HURTBOX-HIT",true);
					else if (hitbox.Flag1 == 2) filerow.classed("HURTBOX-PROJ",true);
					// else if (hitbox.Flag1 == 6) filerow.classed("HURTBOX-THROW",true);
					else filerow.classed("HURTBOX-LOL",true);
					filerow.append("td").text((i+1) + ".").style("color","#999");
					filerow.append("td").text(d.scriptid);
					filerow.append("td").text(movescript.Name);
					filerow.append("td").text(d.index).style("color","#999");
					filerow.append("td").text(hitbox.TickStart);
					filerow.append("td").text(hitbox.TickEnd);
					filerow.append("td").text(hitbox.X).style("color","#933");
					filerow.append("td").text(hitbox.Y).style("color","#393");
					filerow.append("td").text(hitbox.Z).style("color","#339");
					filerow.append("td").text(hitbox.Width).style("color","#933");
					filerow.append("td").text(hitbox.Height).style("color","#393");
					filerow.append("td").text(hitbox.Unknown1.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown2.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown3.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown4.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown5.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown6.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown7.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown8.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown9.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Flag1);
					filerow.append("td").text(hitbox.Flag2);
					filerow.append("td").text(hitbox.Flag3);
					filerow.append("td").text(hitbox.Flag4);
					filerow.append("td").text(hitbox.HitEffect);
					filerow.append("td").text(hitbox.Unknown10.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown11.toString(16)).style("color","#999");
					filerow.append("td").text(hitbox.Unknown12);
					filerow.append("td").text(hitbox.Unknown13);
		
				});
			});

			cfol.append("li").attr("id","TYPE1SLIST").text("TYPE1S LIST").attr("value",type1slist.length).on("click",function(d){
				if (!HASHCLICK) UCHASH(charfile + "/TYPE1S/LIST");
				SCRIPTBOX.selectAll("li.DIFF2").classed("DIFF2",false);
				d3.select(this).classed("DIFF2",true);
				FILEDIV.selectAll("*").remove();
				FILEDIV.append("div").text("TYPE1S LIST");
				var filetable = FILEDIV.append("table").classed("MOVEINPUTTABLE",true).style("text-align","center");
				var thead = ["#","ID","SCRIPT","#", "TickStart","TickEnd","Flag1","Flag2","AUTO CORRECT","Flag1","Flag2"];
				filetable.append("thead").style("position","sticky").style("top","0").append("tr").selectAll("td").data(thead).enter().append("td").text(function(d){return d;})
				filetable.append("tbody").selectAll("tr").data(type1slist).enter().append("tr").each(function(d,i){
					var movescript = d.script;
					var hitbox = d.hurtbox;
					var filerow = d3.select(this);
					if (hitbox.Flag1 & 1) filerow.classed("HURTBOX-HITPROJ",true);
					else if (hitbox.Flag1 & 2) filerow.classed("HURTBOX-HIT",true);
					else if (hitbox.Flag1 & 4) filerow.classed("HURTBOX-THROW",true);
					// else if (hitbox.Flag1 & 2) filerow.classed("HURTBOX-PROJ",true);
					// else if (hitbox.Flag1 == 6) filerow.classed("HURTBOX-THROW",true);
					else filerow.classed("HURTBOX-LOL",true);
					filerow.append("td").text((i+1) + ".").style("color","#999");
					filerow.append("td").text(d.scriptid);
					filerow.append("td").text(movescript.Name);
					filerow.append("td").text(d.index).style("color","#999");
					filerow.append("td").text(hitbox.TickStart);
					filerow.append("td").text(hitbox.TickEnd);
					filerow.append("td").text(hitbox.Flag1.toString(16));
					filerow.append("td").text(hitbox.Flag2.toString(16));
					filerow.append("td").text((hitbox.Flag1 & 0x10000).toString(16)).style("color",(hitbox.Flag1 & 0x10000) ? "" : "#999");
					filerow.append("td").text(DEC2BIN(hitbox.Flag1));
					filerow.append("td").text(DEC2BIN(hitbox.Flag2));
				});
			});

			cfol.append("li").attr("id","AUTOCANCELLIST").text("AUTO CANCEL LIST").attr("value",autocancellist.length).on("click",function(d){
				if (!HASHCLICK) UCHASH(charfile + "/AUTOCANCEL/LIST");
				SCRIPTBOX.selectAll("li.DIFF2").classed("DIFF2",false);
				d3.select(this).classed("DIFF2",true);
				FILEDIV.selectAll("*").remove();
				FILEDIV.append("div").text("AUTO CANCEL LIST");
				var filetable = FILEDIV.append("table").classed("MOVEINPUTTABLE",true).style("text-align","center");
				var thead = ["#","ID","SCRIPT","#", "TickStart","TickEnd","Condition","MoveIndex","MoveIndexName","Unknown1","NumberOfInts","Unknown2","Offset","Ints"];
				filetable.append("thead").style("position","sticky").style("top","0").append("tr").selectAll("td").data(thead).enter().append("td").text(function(d){return d;})
				filetable.append("tbody").selectAll("tr").data(autocancellist).enter().append("tr").each(function(d,i){
					var movescript = d.script;
					var autocancel = d.autocancel;
					var filerow = d3.select(this);
					filerow.append("td").text((i+1) + ".").style("color","#999");
					filerow.append("td").text(d.scriptid);
					filerow.append("td").text(movescript.Name);
					filerow.append("td").text(d.index).style("color","#999");
					filerow.append("td").text(autocancel.TickStart);
					filerow.append("td").text(autocancel.TickEnd);
					filerow.append("td").text(autocancel.Condition);
					filerow.append("td").text(autocancel.MoveIndex);
					filerow.append("td").text(autocancel.MoveIndexName);
					filerow.append("td").text(autocancel.Unknown1);
					filerow.append("td").text(autocancel.NumberOfInts);
					filerow.append("td").text(autocancel.Unknown2);
					filerow.append("td").text(autocancel.Offset);
					filerow.append("td").text(autocancel.Ints);
				});
			});


			cfol.append("li").attr("id","NOPUSHLIST").text("NO PUSH LIST").attr("value",nopushlist.length).on("click",function(d){
				if (!HASHCLICK) UCHASH(charfile + "/NOPUSH/LIST");
				SCRIPTBOX.selectAll("li.DIFF2").classed("DIFF2",false);
				d3.select(this).classed("DIFF2",true);
				FILEDIV.selectAll("*").remove();
				FILEDIV.append("div").text("NO PUSH LIST");
				var filetable = FILEDIV.append("table").classed("MOVEINPUTTABLE",true).style("text-align","center");
				var thead = ["#","ID","SCRIPT","#"];
				filetable.append("thead").append("tr").selectAll("td").data(thead).enter().append("td").text(function(d){return d;})
				filetable.append("tbody").selectAll("tr").data(nopushlist).enter().append("tr").each(function(d,i){
					var movescript = d.script;
					var filerow = d3.select(this);
					filerow.append("td").text((i+1) + ".").style("color","#999");
					filerow.append("td").text(d.scriptid);
					filerow.append("td").append("a").attr("href","/DIFF/#"+CHARFILE[cfi]+"/SCRIPT/"+d.scriptid).text(movescript.Name);
					filerow.append("td").text(d.index).style("color","#999");
				});
			});

			if (HASHNAME != null && HASHINDEX != null) {
				var HASHNODE = d3.select("#"+HASHNAME+HASHINDEX).node();
				if (HASHNODE != null) { HASHNODE.scrollIntoViewIfNeeded(); HASHNODE.click(); }
			}
			HASHCLICK = false;
		// }); // NOFD
		});
		});
	});
});
d3.select("#JSONDIV").append("span").text("BAC DIFF");	
d3.select("#JSONDIV").append("ul").attr("id","BACUL").selectAll("li").data(CHARBAC).enter().append("li").text(function(d){return d;}).on("click",function(d,i){
	if (i>=CHARBAC.length-1) return;
	UCHASH(d);
	d3.selectAll(".DIFF1").classed("DIFF1",false);
	d3.select(this).classed("DIFF1",true);
	d3.select("#SCRIPT").classed("fold", true);
	document.getElementById('DIFF').innerHTML = "<span class=\"DIFF1\">" + CHARBAC[i] + "</span> <span class=\"DIFF2\">" + CHARBAC[i+1] + "</span>";
	d3.json("JSON/"+CHARBAC[i]+".json", function(error1, data1) {
		d3.json("JSON/"+CHARBAC[i+1]+".json", function(error2, data2) {
			data1["JSON"] = CHARBAC[i];
			data2["JSON"] = CHARBAC[i+1];
			var bac1 = UCBAC(data1), bac2 = UCBAC(data2);
			var delta = jsondiffpatch.create({ objectHash: function(obj, index) {
				if (obj == null) return "$$index" + index;
				return obj.Name || obj.Index || "$$index" + index;
			}}).diff(bac1, bac2);
			// beautiful html diff
			var diff = jsondiffpatch.formatters.html.format(delta);
			if (diff == "") diff = "NO DIFF LOL";
			document.getElementById('DIFF').innerHTML += "<br><br>" + diff;
			// jsondiffpatch.formatters.html.hideUnchanged();
			// d3.selectAll("#DIFF .jsondiffpatch-unchanged").remove();
			// d3.selectAll("li[data-key=Moves] > div").on("click", function() { var d = d3.select(this.parentNode); d.classed("fold", !d.classed("fold")); });
			d3.selectAll("li[data-key=Moves] > div").on("click", function() { var d = d3.select(this.parentNode); d.classed("fold", !d.classed("fold")); d3.selectAll("li[data-key=Moves] > ul > li > div.jsondiffpatch-property-name").classed("fold", d.classed("fold")); });
			d3.selectAll("li[data-key=Moves] > ul > li > div.jsondiffpatch-property-name").on("click", function() { d3.select(this).classed("fold", !d3.select(this).classed("fold"))});

			d3.selectAll("li[data-key=HitboxEffects] > div").on("click", function() { var d = d3.select(this.parentNode); d.classed("fold", !d.classed("fold")); d3.selectAll("li[data-key=HitboxEffects] > ul > li > div.jsondiffpatch-property-name").classed("fold", d.classed("fold")); });
			d3.selectAll("li[data-key=HitboxEffects] > ul > li > div.jsondiffpatch-property-name").on("click", function() { d3.select(this).classed("fold", !d3.select(this).classed("fold"))});
			d3.selectAll("li[data-key=Moves] > ul > li.jsondiffpatch-node").insert("button", "ul").text("SCRIPT").on("click", UCBACSCRIPT);
			d3.selectAll("li[data-key=Moves] > ul > li.jsondiffpatch-added").insert("button", "div:nth-child(2)").text("SCRIPT").on("click", UCBACSCRIPT);
			function UCBACSCRIPT(){
				d3.select("#SCRIPT").classed("fold", false);
				var datakey = d3.select(this.parentNode).attr("data-key");
				var delta2 = jsondiffpatch.create({ objectHash: function(obj, index) {
					if (obj == null) return "$$index" + index;
					return obj.Name || obj.Index || "$$index" + index;
				}}).diff(bac1.Moves[datakey], bac2.Moves[datakey]);
				var diff2 = jsondiffpatch.formatters.html.format(delta2,bac1.Moves[datakey]);
				document.getElementById('SCRIPT').innerHTML = "<span class=\"DIFF1\">" + CHARBAC[i] + "</span> <span class=\"DIFF2\">" + CHARBAC[i+1] + "</span>" + "<br><br><span class=\"DIFF3\">" + datakey + ": </span>";
				document.getElementById('SCRIPT').innerHTML += "<br><br>" + diff2;
				// d3.select("#SCRIPT pre").text(JSON.stringify(bac1.Moves[datakey],null,2));
			}
			d3.selectAll("li[data-key=HitboxEffects] > ul > li.jsondiffpatch-node").insert("button", "ul").text("EFFECT").on("click", UCBACEFFECT);
			d3.selectAll("li[data-key=HitboxEffects] > ul > li.jsondiffpatch-added").insert("button", "div:nth-child(2)").text("EFFECT").on("click", UCBACEFFECT);
			function UCBACEFFECT(){
				d3.select("#SCRIPT").classed("fold", false);
				var datakey = d3.select(this.parentNode).attr("data-key");
				var delta2 = jsondiffpatch.create({ objectHash: function(obj, index) {
					if (obj == null) return "$$index" + index;
					return obj.Name || obj.Index || "$$index" + index;
				}}).diff(bac1.HitboxEffects[datakey], bac2.HitboxEffects[datakey]);
				var diff2 = jsondiffpatch.formatters.html.format(delta2,bac1.HitboxEffects[datakey]);
				document.getElementById('SCRIPT').innerHTML = "<span class=\"DIFF1\">" + CHARBAC[i] + "</span> <span class=\"DIFF2\">" + CHARBAC[i+1] + "</span>" + "<br><br><span class=\"DIFF3\">" + datakey + ": </span>";
				document.getElementById('SCRIPT').innerHTML += "<br><br>" + diff2;
				// d3.select("#SCRIPT pre").text(JSON.stringify(bac1.Moves[datakey],null,2));
			}
		});
	});
});
d3.select("#JSONDIV").append("span").text("BCM DIFF");
d3.select("#JSONDIV").append("ul").attr("id","BCMUL").selectAll("li").data(CHARBCM).enter().append("li").text(function(d){return d;}).on("click",function(d,i){
	if (i>=CHARBCM.length-1) return;
	UCHASH(d);
	d3.selectAll(".DIFF1").classed("DIFF1",false);
	d3.select(this).classed("DIFF1",true);
	d3.select("#SCRIPT").classed("fold", true);
	document.getElementById('DIFF').innerHTML = "<span class=\"DIFF1\">" + CHARBCM[i] + "</span> <span class=\"DIFF2\">" + CHARBCM[i+1] + "</span>";
	d3.json("JSON/"+CHARBCM[i]+".json", function(error1, data1) {
		d3.json("JSON/"+CHARBCM[i+1]+".json", function(error2, data2) {
			data1["JSON"] = CHARBCM[i];
			data2["JSON"] = CHARBCM[i+1];
			var bcm1 = UCBCM(data1), bcm2 = UCBCM(data2);
			var delta = jsondiffpatch.create({ objectHash: function(obj, index) {
				if (obj == null) return "$$index" + index;
				return obj.Name || obj.Index || "$$index" + index;
			}}).diff(bcm1, bcm2);
			// beautiful html diff
			var diff = jsondiffpatch.formatters.html.format(delta);
			if (diff == "") diff = "NO DIFF LOL";
			document.getElementById('DIFF').innerHTML += "<br><br>" + diff;
			// jsondiffpatch.formatters.html.hideUnchanged();
			// d3.selectAll(".jsondiffpatch-unchanged").remove();
			d3.selectAll("li[data-key=Moves] > div").on("click", function() { var d = d3.select(this.parentNode); d.classed("fold", !d.classed("fold")); d3.selectAll("li[data-key=Moves] > ul > li > div.jsondiffpatch-property-name").classed("fold", d.classed("fold")); });
			d3.selectAll("li[data-key=Moves] > ul > li > div.jsondiffpatch-property-name").on("click", function() { d3.select(this).classed("fold", !d3.select(this).classed("fold"))});
			d3.selectAll("li[data-key=CancelLists] > div").on("click", function() { var d = d3.select(this.parentNode); d.classed("fold", !d.classed("fold")); d3.selectAll("li[data-key=CancelLists] > ul > li > div.jsondiffpatch-property-name").classed("fold", d.classed("fold")); });
			d3.selectAll("li[data-key=CancelLists] > ul > li > div.jsondiffpatch-property-name").on("click", function() { d3.select(this).classed("fold", !d3.select(this).classed("fold"))});
			d3.selectAll("li[data-key=Inputs] > div").on("click", function() { var d = d3.select(this.parentNode); d.classed("fold", !d.classed("fold")); d3.selectAll("li[data-key=Inputs] > ul > li > div.jsondiffpatch-property-name").classed("fold", d.classed("fold")); });
			d3.selectAll("li[data-key=Inputs] > ul > li > div.jsondiffpatch-property-name").on("click", function() { d3.select(this).classed("fold", !d3.select(this).classed("fold"))});
			d3.selectAll("li[data-key=Charges] > div").on("click", function() { var d = d3.select(this.parentNode); d.classed("fold", !d.classed("fold")); d3.selectAll("li[data-key=Charges] > ul > li > div.jsondiffpatch-property-name").classed("fold", d.classed("fold")); });
			d3.selectAll("li[data-key=Charges] > ul > li > div.jsondiffpatch-property-name").on("click", function() { d3.select(this).classed("fold", !d3.select(this).classed("fold"))});			
			d3.selectAll("li[data-key=Moves] > ul > li.jsondiffpatch-node").insert("button", "ul").text("MOVE").on("click", UCBCMMOVE);
			d3.selectAll("li[data-key=Moves] > ul > li.jsondiffpatch-added").insert("button", "div:nth-child(2)").text("MOVE").on("click", UCBCMMOVE);
			function UCBCMMOVE(){
				d3.select("#SCRIPT").classed("fold", false);
				var datakey = d3.select(this.parentNode).attr("data-key");
				var delta2 = jsondiffpatch.create({ objectHash: function(obj, index) {
					if (obj == null) return "$$index" + index;
					return obj.Name || obj.Index || "$$index" + index;
				}}).diff(bcm1.Moves[datakey], bcm2.Moves[datakey]);
				var diff2 = jsondiffpatch.formatters.html.format(delta2,bcm1.Moves[datakey]);
				document.getElementById('SCRIPT').innerHTML = "<span class=\"DIFF1\">" + CHARBCM[i] + "</span> <span class=\"DIFF2\">" + CHARBCM[i+1] + "</span>" + "<br><br><span class=\"DIFF3\">" + datakey + ": </span>";
				document.getElementById('SCRIPT').innerHTML += "<br><br>" + diff2;
			}
			d3.selectAll("li[data-key=Inputs] > ul > li.jsondiffpatch-node").insert("button", "ul").text("INPUT").on("click", UCBCMINPUT);
			d3.selectAll("li[data-key=Inputs] > ul > li.jsondiffpatch-added").insert("button", "div:nth-child(2)").text("INPUT").on("click", UCBCMINPUT);
			function UCBCMINPUT(){
				d3.select("#SCRIPT").classed("fold", false);
				var datakey = d3.select(this.parentNode).attr("data-key");
				var delta2 = jsondiffpatch.create({ objectHash: function(obj, index) {
					if (obj == null) return "$$index" + index;
					return obj.Name || obj.Index || "$$index" + index;
				}}).diff(bcm1.Inputs[datakey], bcm2.Inputs[datakey]);
				var diff2 = jsondiffpatch.formatters.html.format(delta2,bcm1.Inputs[datakey]);
				document.getElementById('SCRIPT').innerHTML = "<span class=\"DIFF1\">" + CHARBCM[i] + "</span> <span class=\"DIFF2\">" + CHARBCM[i+1] + "</span>" + "<br><br><span class=\"DIFF3\">" + datakey + ": </span>";
				document.getElementById('SCRIPT').innerHTML += "<br><br>" + diff2;
			}
			d3.selectAll("li[data-key=CancelLists] > ul > li.jsondiffpatch-node").insert("button", "ul").text("CANCEL").on("click", UCBCMCANCEL);
			d3.selectAll("li[data-key=CancelLists] > ul > li.jsondiffpatch-added").insert("button", "div:nth-child(2)").text("CANCEL").on("click", UCBCMCANCEL);
			function UCBCMCANCEL(){
				d3.select("#SCRIPT").classed("fold", false);
				var datakey = d3.select(this.parentNode).attr("data-key");
				var delta2 = jsondiffpatch.create({ objectHash: function(obj, index) {
					if (obj == null) return "$$index" + index;
					return obj.Name || obj.Index || "$$index" + index;
				}}).diff(bcm1.CancelLists[datakey], bcm2.CancelLists[datakey]);
				var diff2 = jsondiffpatch.formatters.html.format(delta2,bcm1.CancelLists[datakey]);
				document.getElementById('SCRIPT').innerHTML = "<span class=\"DIFF1\">" + CHARBCM[i] + "</span> <span class=\"DIFF2\">" + CHARBCM[i+1] + "</span>" + "<br><br><span class=\"DIFF3\">" + datakey + ": </span>";
				// document.getElementById('SCRIPT').innerHTML += "<br><br>" + bcm1.CancelLists[datakey].CancelIndexNames;
				document.getElementById('SCRIPT').innerHTML += "<br><br>" + diff2;
			}
		});
	});
});
function UCBCM(data) {
	var bcm = { Charges: {}, Inputs: {}, Moves: {}, CancelLists: {} };

	data.Charges.forEach(function(charge, index) {
		if (charge == null) return;
		bcm.Charges[charge.Index + " ChargeDirection:" + charge.ChargeDirection] = charge;
	});
	data.Inputs.forEach(function(input, index) {
		if (input == null) return;
		// input["JSON"] = data.JSON + ": " + input.Name;
		// bcm.Inputs[input.Index + " " + input.Name] = input;
		bcm.Inputs["Input " + input.Index] = input;
	});
	data.Moves.forEach(function(move, index) {
		if (move == null) return;
		// bcm.Moves[move.Index + " " + move.Name] = move;
		bcm.Moves[move.Name] = move;
	});
	data.CancelLists.forEach(function(cancellist, index) {
		if (cancellist == null) return;
		var cancels = {};
		if (cancellist.Cancels != null)
		cancellist.Cancels.forEach(function(cancel, index) {
			if (cancel == null) return;
			// cancels[cancel.Index + " " + cancel.Name] = cancel;
			cancels[cancel.Name] = cancel;
		});
		cancellist.Cancels = cancels;
		// bcm.CancelLists[cancellist.Index + " " + cancellist.CancelIndexNames] = cancellist;
		bcm.CancelLists["CancelList " + cancellist.Index] = cancellist;
	});
	return bcm;
}
function UCBAC(data) {
	var bac = { Moves: {}, HitboxEffects: {} };
	var hitboxes = {};
	var hitboxesall = {};
	data.MoveLists.forEach(function(ML){
		ML.Moves.forEach(function(move, index) {
			if (move == null) return;
			if (move.hasOwnProperty("Positions")) delete move["Positions"];
			if (move.hasOwnProperty("SoundEffects")) delete move["SoundEffects"];
			if (move.hasOwnProperty("Animations")) delete move["Animations"];
			// bac.Moves[move.Index + " " + move.Name] = move;
			bac.Moves[move.Name] = move;
			if (move.Hitboxes)
			move.Hitboxes.forEach(function(hitbox, index){
				if (hitboxes[hitbox.HitboxEffectIndex] == null) {
					hitboxes[hitbox.HitboxEffectIndex] = move.Name;
					hitboxesall[hitbox.HitboxEffectIndex] = move.Name;
				}
				else
					hitboxesall[hitbox.HitboxEffectIndex] += ", " + move.Name;
			});
		});
	});
	data.HitboxEffectses.forEach(function(effect, index){
		if (effect == null) return;
		var effects = {};
		effects["Index"] = effect.Index;
		effects["Hitbox"] = hitboxes[effect.Index];
		// if (hitboxesall[effect.Index]) effects["JSON"] = data.JSON + ": " + hitboxesall[effect.Index];
		if (hitboxesall[effect.Index]) effects["Hitboxes"] = hitboxesall[effect.Index];
		effects["HIT_STAND"] = effect["HIT_STAND"];
		effects["COUNTERHIT_STAND"] = effect["COUNTERHIT_STAND"];
		effects["GUARD_STAND"] = effect["GUARD_STAND"];
		// if (effects["Moves"])
		// bac.HitboxEffects["HitboxEffect " + effects.Index + ": " + (effects.Moves || null)] = effects;
		bac.HitboxEffects["HitboxEffect " + effects.Index] = effects;
	});
	return bac;
}
function UCHASH(h) {
	window.location.hash = "#" + h.replace(".json","");
}
function MECHASH(MECLICK) {
	var hash = window.location.hash.substr(1).replace(".json","").split("/");
	var h = hash[0];
	var i = CHARBAC.indexOf(h);
	if (i > -1) {
		d3.select("#BACUL").select("li:nth-child("+(i+1)+")").node().click();
		return;
	}
	i = CHARBCM.indexOf(h);
	if (i > -1) {
		d3.select("#BCMUL").select("li:nth-child("+(i+1)+")").node().click();
	}
	i = CHARFILE.indexOf(h);
	if (i > -1) {
		if (hash.length >= 3) {
			HASH.NAME = hash[1];
			HASH.INDEX = hash[2];
		}
		HASH.CLICK = true;
		if (MECLICK != false) {
			d3.select("#CHARUL").select("li:nth-child("+(i+1)+")").node().click();
			d3.select("#CHARUL").select("li:nth-child("+(i+1)+")").node().scrollIntoViewIfNeeded();
		}
	}
}
MECHASH();
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72771119-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
